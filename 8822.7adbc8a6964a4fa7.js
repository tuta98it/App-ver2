"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8822],{8822:(N,u,a)=>{a.r(u),a.d(u,{LoginPageModule:()=>P});var p=a(6895),c=a(4719),i=a(7331),d=a(6069),m=a(5861),l=a(6443),n=a(6738),v=a(1557),h=a(529),f=a(849),S=a(1188),A=a(2013),M=a(888);const T=[{path:"",component:(()=>{class e{constructor(o,t,r,s,Z,C,I,b,L,E,O){this.mainService=o,this.http=t,this.router=r,this.storage=s,this.loadingController=Z,this.toastController=C,this.localStorage=I,this.notificationService=b,this.platform=L,this.navCtrl=E,this.generalService=O}ngOnInit(){var o=this;return(0,m.Z)(function*(){o.localStorage.getSelectedUser().then(t=>{t&&o.navCtrl.navigateRoot(["/main/laboratory"])}),o.localStorage.get("deviceInfo").then(t=>{o.deviceInfo=t,console.log(o.deviceInfo)}),yield o.setInitData()})()}setInitData(){this.generalService.getInitialData().subscribe(o=>{null!==o&&localStorage.setItem(l.s.INIT_DATA,JSON.stringify(o))},o=>{console.log("error Set INIT_DATA for local-storage")})}showAlertPassword(){this.notificationService.showMessage("warning","Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean \u0111\u1ec3 c\u1ea5p l\u1ea1i m\u1eadt kh\u1ea9u")}doLogin(){var o=this;return(0,m.Z)(function*(){if(!o.username)return void o.notificationService.showMessage("danger","T\xean \u0111\u0103ng nh\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng");const t=yield o.loadingController.create({cssClass:"my-custom-class",message:"\u0110ang ti\u1ebfn h\xe0nh \u0111\u0103ng nh\u1eadp..."});yield t.present(),o.deviceInfo={deviceId:o.deviceInfo.uuid,deviceName:o.platform.is("ios")?"IOS":o.deviceInfo.model},o.mainService.login(o.username,o.password).subscribe(r=>{if(0==+r.result)return t.dismiss(),void o.notificationService.showMessage("danger","Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u");console.log("Constant.STORAGE_USERINFO, = ",l.s.STORAGE_USERINFO,r),o.storage.set(l.s.STORAGE_USERINFO,r).then(s=>{t.dismiss(),localStorage.setItem(l.s.TOKEN,s.token),console.log("res3: ",s),o.navCtrl.navigateRoot(["/main/laboratory"])})},r=>{o.notificationService.showMessage("danger",r.error.message?"Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u":`C\xf3 l\u1ed7i khi \u0111\u0103ng nh\u1eadp: ${r.error.message}`),t.dismiss()})})()}}return e.\u0275fac=function(o){return new(o||e)(n.Y36(v.J),n.Y36(h.eN),n.Y36(d.F0),n.Y36(f.K),n.Y36(i.HT),n.Y36(i.yF),n.Y36(S.V),n.Y36(A.g),n.Y36(i.t4),n.Y36(i.SH),n.Y36(M.m))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],decls:27,vars:2,consts:[["src","/assets/images/login_bg_top.png",2,"position","absolute","right","0"],[1,"ion-no-margin","ion-no-padding","ion-no-box-shadow",2,"margin-top","150px"],[1,"ion-no-padding"],[1,"ion-cen"],["src","/assets/images/invivo.png",2,"max-width","100%","width","125px","margin","5px auto"],["lines","none",1,"ion-margin-bottom"],["size","small","color","primary","name","person-outline"],["placeholder","T\xean \u0111\u0103ng nh\u1eadp",3,"ngModel","ngModelChange"],["size","small","color","primary","name","key-outline"],["type","password","placeholder","M\u1eadt kh\u1ea9u",3,"ngModel","ngModelChange"],[1,"ion-margin-bottom"],["color","primary",3,"click"],["color","primary",2,"width","100%",3,"click"],[1,"footer-bg"],["color","primary",1,"ion-text-center",2,"font-size","12px","background","transparent"],[2,"margin","5px 0","color","#555","font-size","14px"]],template:function(o,t){1&o&&(n.TgZ(0,"ion-content"),n._UZ(1,"img",0),n.TgZ(2,"ion-card",1)(3,"ion-card-header",2)(4,"ion-card-title",3),n._UZ(5,"ion-img",4),n.qZA()(),n.TgZ(6,"ion-card-content")(7,"ion-item",5),n._UZ(8,"ion-icon",6)(9,"ion-label"),n.TgZ(10,"ion-input",7),n.NdJ("ngModelChange",function(s){return t.username=s}),n.qZA()(),n.TgZ(11,"ion-item",5),n._UZ(12,"ion-icon",8)(13,"ion-label"),n.TgZ(14,"ion-input",9),n.NdJ("ngModelChange",function(s){return t.password=s}),n.qZA()(),n.TgZ(15,"div",10)(16,"ion-label",11),n.NdJ("click",function(){return t.showAlertPassword()}),n._uU(17,"Qu\xean m\u1eadt kh\u1ea9u"),n.qZA()(),n.TgZ(18,"div",10)(19,"ion-button",12),n.NdJ("click",function(){return t.doLogin()}),n._uU(20,"\u0110\u0103ng nh\u1eadp"),n.qZA()()()(),n.TgZ(21,"div",13)(22,"label",14)(23,"p",15),n._uU(24,"Phi\xean b\u1ea3n: 1.0.1"),n.qZA(),n.TgZ(25,"p",15),n._uU(26,"\xa9 Copyright Mesoco"),n.qZA()()()()),2&o&&(n.xp6(10),n.Q6J("ngModel",t.username),n.xp6(4),n.Q6J("ngModel",t.password))},dependencies:[c.JJ,c.On,i.YG,i.PM,i.FN,i.Zi,i.Dq,i.W2,i.gu,i.Xz,i.pK,i.Ie,i.Q$,i.j9],styles:["ion-item[_ngcontent-%COMP%]{border:solid 1px var(--ion-color-border-light);border-radius:4px}.item-inner[_ngcontent-%COMP%]{border:none!important}.my-custom-class[_ngcontent-%COMP%]{background:red}.footer-bg[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:127px;background:url(/assets/images/login_bg_bot.png);background-repeat:no-repeat;z-index:-1}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[d.Bz.forChild(T),d.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[p.ez,c.u5,i.Pc,y,h.JF]}),e})()}}]);