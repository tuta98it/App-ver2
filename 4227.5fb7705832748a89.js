"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4227],{4227:(R,p,i)=>{i.r(p),i.d(p,{LoginPageModule:()=>O});var S=i(6895),u=i(4719),r=i(7331),d=i(6069),v=i(5861),a=i(6443),o=i(6738),T=i(1557),m=i(529),A=i(849),I=i(1188),N=i(2013),E=i(888),h=i(7802),c=i(2340);let f=(()=>{class t{constructor(e){this.httpClient=e}login(e){return this.httpClient.post(c.N.baseUrl+"/login",e)}logout(){const e={Authorization:`Bearer ${localStorage.getItem(a.s.TOKEN)}`},n="Bearer "+localStorage.getItem(a.s.TOKEN);return this.httpClient.post(c.N.baseUrl+h.Y.LOGOUT,n,{headers:e})}checkToken(){const e={Authorization:`Bearer ${localStorage.getItem(a.s.TOKEN)}`},n="Bearer "+localStorage.getItem(a.s.TOKEN);return this.httpClient.post(c.N.baseUrl+h.Y.VALIDATE,n,{headers:e})}checkTokenAdmin(){const e={Authorization:`Bearer ${localStorage.getItem(a.s.TOKEN)}`};let n=localStorage.getItem(localStorage.getItem(a.s.TOKEN));return n="Bearer "+localStorage.getItem(a.s.TOKEN),this.httpClient.post(c.N.baseUrl+h.Y.VALIDATE_ADMIN,n,{headers:e})}checkTokenCSC(){const e={Authorization:`Bearer ${localStorage.getItem(a.s.TOKEN)}`},n="Bearer "+localStorage.getItem(a.s.TOKEN);return this.httpClient.post(c.N.baseUrl+h.Y.VALIDATE_CSC,n,{headers:e})}registration(e){return this.httpClient.post(c.N.baseUrl+"/User/Signup",e)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(m.eN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();const M=[{path:"",component:(()=>{class t{constructor(e,n,g,s,b,y,L,P,k,Z,U,Y){this.mainService=e,this.http=n,this.router=g,this.storage=s,this.loadingController=b,this.toastController=y,this.localStorage=L,this.notificationService=P,this.platform=k,this.navCtrl=Z,this.generalService=U,this.authService=Y}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.localStorage.get("deviceInfo").then(n=>{e.deviceInfo=n,console.log(e.deviceInfo)}),e.authService.checkToken().subscribe(n=>{console.log("this.authService.checkToken() res : ",n);const s=n.ret[0].code;n.ret?0===s?e.router.navigate(["/main/laboratory"]):401===s?(localStorage.removeItem(a.s.TOKEN),localStorage.removeItem(a.s.USER_INFO),e.router.navigate(["/"]),e.notificationService.showMessage("darge",`${s}: H\u1ec7 th\u1ed1ng kh\xf4ng x\xe1c th\u1ef1c \u0111\u01b0\u1ee3c ng\u01b0\u1eddi d\xf9ng`)):403===s?(localStorage.removeItem(a.s.TOKEN),localStorage.removeItem(a.s.USER_INFO),e.router.navigate(["/"]),e.notificationService.showMessage("darge",`${s}: Ng\u01b0\u1eddi d\xf9ng kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp`)):e.notificationService.showMessage("darge",`${s}: L\u1ed7i h\u1ec7 th\u1ed1ng, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean`):e.notificationService.showMessage("darge","L\u1ed7i h\u1ec7 th\u1ed1ng, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean")}),yield e.setInitData()})()}setInitData(){this.generalService.getInitialData().subscribe(e=>{null!==e&&localStorage.setItem(a.s.INIT_DATA,JSON.stringify(e))},e=>{console.log("Error Set INIT_DATA for local-storage")})}showAlertPassword(){this.notificationService.showMessage("warning","Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean \u0111\u1ec3 c\u1ea5p l\u1ea1i m\u1eadt kh\u1ea9u")}doLogin(){var e=this;return(0,v.Z)(function*(){if(!e.username)return void e.notificationService.showMessage("danger","T\xean \u0111\u0103ng nh\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng");const n=yield e.loadingController.create({cssClass:"my-custom-class",message:"\u0110ang ti\u1ebfn h\xe0nh \u0111\u0103ng nh\u1eadp..."});yield n.present(),e.deviceInfo={deviceId:e.deviceInfo.uuid,deviceName:e.platform.is("ios")?"IOS":e.deviceInfo.model},e.mainService.login(e.username,e.password).subscribe(g=>{if(0==+g.result)return n.dismiss(),void e.notificationService.showMessage("danger","Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u");console.log("Constant.STORAGE_USERINFO, = ",a.s.STORAGE_USERINFO,g),e.storage.set(a.s.STORAGE_USERINFO,g).then(s=>{n.dismiss(),localStorage.setItem(a.s.TOKEN,s.token),console.log("res3: ",s),e.navCtrl.navigateRoot(["/main/laboratory"])})},g=>{console.log("error : ",g),e.notificationService.showMessage("danger",g.error.message?"Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u":`C\xf3 l\u1ed7i khi \u0111\u0103ng nh\u1eadp: ${g.error.message}`),n.dismiss()})})()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(T.J),o.Y36(m.eN),o.Y36(d.F0),o.Y36(A.K),o.Y36(r.HT),o.Y36(r.yF),o.Y36(I.V),o.Y36(N.g),o.Y36(r.t4),o.Y36(r.SH),o.Y36(E.m),o.Y36(f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:27,vars:2,consts:[["src","/assets/images/login_bg_top.png",2,"position","absolute","right","0"],[1,"ion-no-margin","ion-no-padding","ion-no-box-shadow",2,"margin-top","150px"],[1,"ion-no-padding"],[1,"ion-cen"],["src","/assets/images/invivo.png",2,"max-width","100%","width","125px","margin","5px auto"],["lines","none",1,"ion-margin-bottom"],["size","small","color","primary","name","person-outline"],["placeholder","T\xean \u0111\u0103ng nh\u1eadp",3,"ngModel","ngModelChange"],["size","small","color","primary","name","key-outline"],["type","password","placeholder","M\u1eadt kh\u1ea9u",3,"ngModel","ngModelChange"],[1,"ion-margin-bottom"],["color","primary",3,"click"],["color","primary",2,"width","100%",3,"click"],[1,"footer-bg"],["color","primary",1,"ion-text-center",2,"font-size","12px","background","transparent"],[2,"margin","5px 0","color","#555","font-size","14px"]],template:function(e,n){1&e&&(o.TgZ(0,"ion-content"),o._UZ(1,"img",0),o.TgZ(2,"ion-card",1)(3,"ion-card-header",2)(4,"ion-card-title",3),o._UZ(5,"ion-img",4),o.qZA()(),o.TgZ(6,"ion-card-content")(7,"ion-item",5),o._UZ(8,"ion-icon",6)(9,"ion-label"),o.TgZ(10,"ion-input",7),o.NdJ("ngModelChange",function(s){return n.username=s}),o.qZA()(),o.TgZ(11,"ion-item",5),o._UZ(12,"ion-icon",8)(13,"ion-label"),o.TgZ(14,"ion-input",9),o.NdJ("ngModelChange",function(s){return n.password=s}),o.qZA()(),o.TgZ(15,"div",10)(16,"ion-label",11),o.NdJ("click",function(){return n.showAlertPassword()}),o._uU(17,"Qu\xean m\u1eadt kh\u1ea9u"),o.qZA()(),o.TgZ(18,"div",10)(19,"ion-button",12),o.NdJ("click",function(){return n.doLogin()}),o._uU(20,"\u0110\u0103ng nh\u1eadp"),o.qZA()()()(),o.TgZ(21,"div",13)(22,"label",14)(23,"p",15),o._uU(24,"Phi\xean b\u1ea3n: 1.0.1"),o.qZA(),o.TgZ(25,"p",15),o._uU(26,"\xa9 Copyright Mesoco"),o.qZA()()()()),2&e&&(o.xp6(10),o.Q6J("ngModel",n.username),o.xp6(4),o.Q6J("ngModel",n.password))},dependencies:[u.JJ,u.On,r.YG,r.PM,r.FN,r.Zi,r.Dq,r.W2,r.gu,r.Xz,r.pK,r.Ie,r.Q$,r.j9],styles:["ion-item[_ngcontent-%COMP%]{border:solid 1px var(--ion-color-border-light);border-radius:4px}.item-inner[_ngcontent-%COMP%]{border:none!important}.my-custom-class[_ngcontent-%COMP%]{background:red}.footer-bg[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:127px;background:url(/assets/images/login_bg_bot.png);background-repeat:no-repeat;z-index:-1}"]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[d.Bz.forChild(M),d.Bz]}),t})(),O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[f],imports:[S.ez,u.u5,r.Pc,C,m.JF]}),t})()}}]);