"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3079],{3079:(ge,f,r)=>{r.r(f),r.d(f,{RequestsPageModule:()=>te});var l=r(7331),g=r(6895),d=r(4719),y=r(581),h=r(6069),m=r(5861),c=r(6443),v=r(4904),e=r(6738),P=r(2680),C=r(1188),M=r(849),q=r(2013),Z=r(1557),b=r(5930),T=r(7638),A=r(8132),x=r(888);let E=(()=>{class i{constructor(){}transform(t){return this.isEmpty(t.receiveTime)?"Ch\u01b0a nh\u1eadn y\xeau c\u1ea7u":(this.isEmpty(t.arriveTime)||this.isEmpty(t.completeTime)||this.isEmpty(t.arriveLaboTime),"\u0110\xe3 nh\u1eadn y\xeau c\u1ea7u v\xe0 \u0111ang x\u1eed l\xfd")}isEmpty(t){return!!(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"statusRequestPipe",type:i,pure:!0}),i})(),F=(()=>{class i{constructor(){}transform(t,o){return o.find(a=>a.requestTypeId===t).requestTypeName}isEmpty(t){return!!(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"requestTypePipe",type:i,pure:!0}),i})();const R=["popoverFormFilter"],S=["orderStatusSelect"];function I(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function O(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-content",0)(1,"ion-label",19),e._uU(2,"L\u1ecdc d\u1eef li\u1ec7u theo ..."),e.qZA(),e.TgZ(3,"ion-list")(4,"ion-item",19)(5,"ion-label",20),e._UZ(6,"ion-icon",21),e._uU(7," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.qZA(),e.TgZ(8,"ion-input",22),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.formFilterTestSheet.phoneNoPatient=n)}),e.qZA()(),e.TgZ(9,"ion-item",19)(10,"ion-label",20),e._UZ(11,"ion-icon",23),e._uU(12," Tr\u1ea1ng th\xe1i \u0110\u01a1n h\xe0ng "),e.qZA(),e.TgZ(13,"ion-select",24,25),e.NdJ("ionChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.handleChangeSelectOrderStatus(n))}),e.YNc(15,I,2,2,"ion-select-option",26),e.qZA()()(),e.TgZ(16,"ion-buttons",27)(17,"ion-button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancelFormFilter())}),e._UZ(18,"ion-icon",29),e.qZA(),e.TgZ(19,"ion-button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.restartFormFilter())}),e._UZ(20,"ion-icon",31),e.qZA(),e.TgZ(21,"ion-button",32),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSearchByFormFilter())}),e._UZ(22,"ion-icon",33),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.formFilterTestSheet.phoneNoPatient),e.xp6(5),e.Q6J("interfaceOptions",t.customPopoverOptions),e.xp6(2),e.Q6J("ngForOf",t.initDatas.orderStatus)}}function D(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",35),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function w(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-datetime",38,39),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.filterInterval.pastTime=n)})("ionChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleChangeFilterIntervalCustomByUser(n))}),e.TgZ(2,"span",40),e._uU(3,"Ch\u1ecdn th\u1eddi gian b\u1eaft \u0111\u1ea7u"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("ngModel",t.filterInterval.pastTime)("showDefaultTitle",!0)("showDefaultButtons",!0)("showClearButton",!0)}}function L(i,s){1&i&&(e.TgZ(0,"ion-item")(1,"span",19),e._uU(2,"T\u1eeb ng\xe0y: "),e.qZA(),e._UZ(3,"ion-datetime-button",36),e.TgZ(4,"ion-modal",37),e.YNc(5,w,4,4,"ng-template"),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("keepContentsMounted",!0))}function N(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-datetime",42,43),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.filterInterval.presentTime=n)})("ionChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleChangeFilterIntervalCustomByUser(n))}),e.TgZ(2,"span",40),e._uU(3,"Ch\u1ecdn th\u1eddi gian b\u1eaft \u0111\u1ea7u"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("ngModel",t.filterInterval.presentTime)("showDefaultTitle",!0)("showDefaultButtons",!0)("showClearButton",!0)("min",t.filterInterval.pastTime)}}function U(i,s){1&i&&(e.TgZ(0,"ion-item")(1,"span",19),e._uU(2,"\u0110\u1ebfn ng\xe0y: "),e.qZA(),e._UZ(3,"ion-datetime-button",41),e.TgZ(4,"ion-modal",37),e.YNc(5,N,4,5,"ng-template"),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("keepContentsMounted",!0))}function J(i,s){if(1&i&&(e.TgZ(0,"div",48)(1,"div"),e._UZ(2,"ion-icon",49),e.qZA(),e.TgZ(3,"h3",50),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(e.xi3(5,1,t.appointmentDate,"HH:mm dd/MM/YYYY"))}}function H(i,s){if(1&i&&(e.TgZ(0,"div",48)(1,"div"),e._UZ(2,"ion-icon",21),e.qZA(),e.TgZ(3,"h3",50),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.phone)}}function B(i,s){if(1&i&&(e.TgZ(0,"div",48)(1,"div"),e._UZ(2,"ion-icon",51),e.qZA(),e.TgZ(3,"h3",52),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.address)}}function k(i,s){if(1&i&&(e.TgZ(0,"div",48)(1,"div"),e._UZ(2,"ion-icon",53),e.qZA(),e.TgZ(3,"h3",54),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.comment)}}function Y(i,s){if(1&i&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"div",44),e.YNc(3,J,6,4,"div",45),e.TgZ(4,"div",46)(5,"h3"),e._uU(6),e.ALo(7,"requestTypePipe"),e.qZA()()(),e.YNc(8,H,5,1,"div",45),e.YNc(9,B,5,1,"div",45),e.YNc(10,k,5,1,"div",45),e.TgZ(11,"div",47)(12,"h3"),e._uU(13),e.ALo(14,"statusRequestPipe"),e.qZA()()()()),2&i){const t=s.$implicit,o=e.oxw();e.xp6(3),e.Q6J("ngIf",null==t?null:t.phone),e.xp6(3),e.Oqu(e.xi3(7,6,t.requestTypeId,o.listTypeOrder)),e.xp6(2),e.Q6J("ngIf",null==t?null:t.phone),e.xp6(1),e.Q6J("ngIf",null==t?null:t.address),e.xp6(1),e.Q6J("ngIf",null==t?null:t.comment),e.xp6(3),e.Oqu(e.lcZ(14,9,t))}}function G(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",35),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.requestTypeId),e.xp6(1),e.Oqu(t.requestTypeName)}}function Q(i,s){1&i&&(e.TgZ(0,"span",67),e._uU(1,"*Lo\u1ea1i y\xeau c\u1ea7u kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"),e.qZA())}function K(i,s){1&i&&(e.TgZ(0,"span",67),e._uU(1,"*S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"),e.qZA())}function V(i,s){1&i&&(e.TgZ(0,"span",67),e._uU(1,"*\u0110\u1ecba ch\u1ec9 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"),e.qZA())}function z(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-datetime",70),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.itemPatientFormModalLab.timeSample=n)})("ionChange",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleChangeTimeSample(n))}),e.TgZ(1,"span",40),e._uU(2,"TG L\u1ea5y m\u1ea5u/Thu m\u1eabu"),e.qZA()()}if(2&i){const t=e.oxw(3);e.Q6J("ngModel",t.itemPatientFormModalLab.timeSample)("showDefaultTitle",!0)("showDefaultButtons",!0)("showClearButton",!0)}}function j(i,s){1&i&&(e.TgZ(0,"ion-item")(1,"div",68)(2,"span"),e._uU(3,"TG L\u1ea5y m\u1ea5u/Thu m\u1eabu: "),e.TgZ(4,"span",60),e._uU(5,"*"),e.qZA()(),e._UZ(6,"ion-datetime-button",69),e.qZA(),e.TgZ(7,"ion-modal",37),e.YNc(8,z,3,4,"ng-template"),e.qZA()()),2&i&&(e.xp6(7),e.Q6J("keepContentsMounted",!0))}function $(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",55)(3,"ion-button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.setOpenModalAddPatient(!1))}),e._uU(4,"Hu\u1ef7"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6),e.qZA(),e.TgZ(7,"ion-buttons",56)(8,"ion-button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveModalAddPatient())}),e._uU(9,"L\u01b0u"),e.qZA()()()(),e.TgZ(10,"ion-content",0),e._UZ(11,"label",57),e.TgZ(12,"div")(13,"ion-col")(14,"ion-item")(15,"ion-label",58),e._UZ(16,"ion-icon",59),e._uU(17," Lo\u1ea1i Y\xeau c\u1ea7u "),e.TgZ(18,"span",60),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"ion-select",61),e.NdJ("ionChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.handleChangeRequestType(n))})("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemPatientFormModalLab.valueRequestType=n)}),e.YNc(21,G,2,2,"ion-select-option",11),e.qZA()(),e.YNc(22,Q,2,0,"span",62),e.qZA(),e.TgZ(23,"ion-col")(24,"ion-item")(25,"ion-label",20),e._UZ(26,"ion-icon",21),e._uU(27," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.TgZ(28,"span",60),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"ion-input",63),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemPatientFormModalLab.phone=n)})("keyup",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onKeyUpInputNumberPhone())}),e.qZA()(),e.YNc(31,K,2,0,"span",62),e.qZA(),e.TgZ(32,"ion-col")(33,"ion-item")(34,"ion-label",20),e._UZ(35,"ion-icon",51),e._uU(36," \u0110\u1ecba ch\u1ec9 "),e.TgZ(37,"span",60),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"ion-input",64),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemPatientFormModalLab.address=n)})("keyup",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onKeyUpInputAddress())}),e.qZA()(),e.YNc(40,V,2,0,"span",62),e.qZA(),e.TgZ(41,"ion-col"),e.YNc(42,j,9,1,"ion-item",12),e.qZA(),e.TgZ(43,"ion-item")(44,"ion-label",58),e._UZ(45,"ion-icon",65),e._uU(46," Ghi ch\xfa "),e.qZA(),e.TgZ(47,"ion-input",66),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemPatientFormModalLab.notes=n)}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.titleModalAddPatient),e.xp6(5),e.Q6J("innerHTML",t.instructionModalPatient,e.oJD),e.xp6(9),e.Q6J("interfaceOptions",t.customAlertOptionsRequestType)("ngModel",t.itemPatientFormModalLab.valueRequestType),e.xp6(1),e.Q6J("ngForOf",t.listTypeOrder),e.xp6(1),e.Q6J("ngIf",t.validFormInput.isEmptyRequestType),e.xp6(8),e.Q6J("ngModel",t.itemPatientFormModalLab.phone),e.xp6(1),e.Q6J("ngIf",t.validFormInput.isEmptyNumberPhone),e.xp6(8),e.Q6J("ngModel",t.itemPatientFormModalLab.address),e.xp6(1),e.Q6J("ngIf",t.validFormInput.isEmptyAdress),e.xp6(2),e.Q6J("ngIf","true"),e.xp6(5),e.Q6J("ngModel",t.itemPatientFormModalLab.notes)}}const W=[{path:"",component:(()=>{class i{constructor(t,o,n,a,p,u,_,ne,ie,oe,ae,se,le,re,ue,ce,pe,me){this.photoService=t,this.popoverController=o,this.router=n,this.platform=a,this.localStorage=p,this.storage=u,this.navCtrl=_,this.pickerCtrl=ne,this.actionSheetCtrl=ie,this.notificationService=oe,this.mainService=ae,this.badgeService=se,this.appVersion=le,this.alertController=re,this.orderService=ue,this.loadingCtrl=ce,this.datePipe=pe,this.generalService=me,this.isPopoverOpenFilter=!1,this.titleModalAddPatient="Th\xeam y\xeau c\u1ea7u",this.instructionModalPatient="M\u1eddi nh\u1eadp th\xf4ng tin b\u1ec7nh nh\xe2n :",this.numberOfNewPatients=0,this.isModalOpenFormPatient=!1,this.validFormInput={isEmptyRequestType:!1,isEmptyNumberPhone:!1,isEmptyAdress:!1,isEmptyTimeSample:!1},this.customPopoverOptions={subHeader:"Ch\u1ecdn tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng c\u1ea7n l\u1ecdc"},this.itemPatientFormModalLab={valueRequestType:0,name:"",phone:"",address:"",timeSample:this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm:ss"),notes:""},this.listPatientLab=[{name:"1234-1643 Tr\u1ea7n V\u0103n A",phone:"0981123574",address:"CT6 Khu \u0111\xf4 th\u1ecb Vi\u1ec7t H\u01b0ng, Long Bi\xean, H\xe0 N\u1ed9i",conditon:"Vi\xeam lo\xe9t d\u1ea1 d\xe0y t\xe1 tr\xe0ng",status:"Ch\u01b0a nh\u1eadn y\xeau c\u1ea7u",notes:""},{name:"1234 - 2341 Tr\u1ea7n Th\u1ecb L\xfd",phone:"0234538592",address:"257 Gi\u1ea3i ph\xf3ng, Hai B\xe0 Tr\u01b0ng, H\xe0 N\u1ed9i",conditon:"S\u1ed1t xu\u1ea5t huy\u1ebft",status:"\u0110\xe3 nh\u1eadn y\xeau c\u1ea7u v\xe0 \u0111ang x\u1eed l\xfd",notes:""},{name:"1234 - 1643 L\xfd Thu\u1ef3 Linh",phone:"0903245394",address:"40 Ph\u01b0\u1eddng Li\u1ec7t, Thanh Xu\xe2n, H\xe0 N\u1ed9i",conditon:"Vi\xeam gan A",status:"\u0110\xe3 tr\u1ea3 k\u1ebft qu\u1ea3",notes:""}],this.listOrder=[],this.listRequest=[],this.listPartner=[],this.listTypeOrder=[],this.formFilterTestSheet={namePatient:"",phoneNoPatient:"",orderStatus:0},this.filterInterval={isShow:!1,presentTime:"",pastTime:""},this.customAlertOptionsRequestType={header:"Ch\u1ecdn lo\u1ea1i y\xeau c\u1ea7u",translucent:!0},this.now=new Date,this.listPatientLab=[{name:"1234-1643 Tr\u1ea7n V\u0103n A",phone:"0981123574",address:"CT6 Khu \u0111\xf4 th\u1ecb Vi\u1ec7t H\u01b0ng, Long Bi\xean, H\xe0 N\u1ed9i",conditon:"Vi\xeam lo\xe9t d\u1ea1 d\xe0y t\xe1 tr\xe0ng",status:"Ch\u01b0a nh\u1eadn y\xeau c\u1ea7u",notes:""},{name:"1234 - 2341 Tr\u1ea7n Th\u1ecb L\xfd",phone:"0234538592",address:"257 Gi\u1ea3i ph\xf3ng, Hai B\xe0 Tr\u01b0ng, H\xe0 N\u1ed9i",conditon:"S\u1ed1t xu\u1ea5t huy\u1ebft",status:"\u0110\xe3 nh\u1eadn y\xeau c\u1ea7u v\xe0 \u0111ang x\u1eed l\xfd",notes:""},{name:"1234 - 1643 L\xfd Thu\u1ef3 Linh",phone:"0903245394",address:"40 Ph\u01b0\u1eddng Li\u1ec7t, Thanh Xu\xe2n, H\xe0 N\u1ed9i",conditon:"Vi\xeam gan A",status:"\u0110\xe3 tr\u1ea3 k\u1ebft qu\u1ea3",notes:""}]}onKeyUpInputNamePatient(){}onKeyUpInputNumberPhone(){this.validFormInput.isEmptyNumberPhone=this.isEmpty(this.itemPatientFormModalLab.phone)}onKeyUpInputAddress(){this.validFormInput.isEmptyAdress=this.isEmpty(this.itemPatientFormModalLab.address)}ionViewDidLoad(){console.log("ionViewDidLoad")}ionViewWillLeave(){console.log("ionViewWillLeave")}ionViewDidLeave(){console.log("ionViewDidLeave")}ionViewWillUnload(){console.log("ionViewWillUnload")}ionViewDidEnter(){console.log("ionViewDidEnter")}ionViewWillEnter(){return(0,m.Z)(function*(){console.log("ionViewWillEnter")})()}ngOnInit(){var t=this;return(0,m.Z)(function*(){console.log("ngOnInit"),t.localStorage.getSelectedUser().then(n=>{t.userInfo=n}),yield t.getListInitialData(),yield t.getListRequestByPayload({page:1,pageSize:100,textSearch:null,fromDate:null,toDate:null,phone:null,partnerId:null,receiveUserId:null,called:null,arrived:null,arrivedLabo:null,warning:null,received:null,requestTypeId:null,userCreated:null,canceled:!1},!0),yield t.getListOrderType()})()}showLoading(){var t=this;return(0,m.Z)(function*(){(yield t.loadingCtrl.create({message:"D\u1eef li\u1ec7u \u0111ang t\u1ea3i l\xean sau 2 gi\xe2y ...",duration:2e3})).present()})()}getListOrder(){this.showLoading(),this.orderService.getOrders({barcode:"",patient:"",status:0,fromDate:"",toDate:"",assignToUserId:0,counselors:null,partnerId:0,isSendSMS:null,isPrintResult:null,patientAge:null,phoneNo:null,keyword:"",pageSize:50,page:1}).subscribe(o=>{null!=o&&(this.listOrder=o.data,console.log("this.listOrder : ",this.listOrder))},o=>{403===o.status?(this.notificationService.showMessage(c.s.DANGER,"Ng\u01b0\u1eddi d\xf9ng c\xf3 quy\u1ec1n truy c\u1eadp"),this.router.navigate(["/login"])):this.notificationService.showMessage(c.s.DANGER,"D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")})}getListOrderType(){this.generalService.getListRequestType().subscribe(t=>{null!==t&&(console.log("getListOrderType res: ",t),this.listTypeOrder=t.filter(o=>"LM"===o.requestTypeCode||"TM"===o.requestTypeCode))},t=>{})}getListRequestByPayload(t,o){o&&this.showLoading(),this.generalService.getRequest(t).subscribe(n=>{null!=n&&(this.listRequest=n.data,console.log("this.listRequest : ",this.listRequest))},n=>{403===n.status?(this.notificationService.showMessage(c.s.DANGER,"Ng\u01b0\u1eddi d\xf9ng c\xf3 quy\u1ec1n truy c\u1eadp"),this.router.navigate(["/login"])):this.notificationService.showMessage(c.s.DANGER,"D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")})}getListInitialData(){this.initDatas=JSON.parse(localStorage.getItem(c.s.INIT_DATA))}presentPopoverFilter(t){this.popoverFormFilter.event=t,this.isPopoverOpenFilter=!0}getListPartner(){this.generalService.getListPartner().subscribe(t=>{this.listPartner=t},t=>{})}showProfile(){}logout(){this.localStorage.clearAll(),this.popoverController.dismiss(),this.router.navigate(["/"])}doRefresh(t){}setOpenModalAddPatient(t){this.isModalOpenFormPatient=t}openModalPatientLab(){this.instructionModalPatient="M\u1eddi t\u1ea1o phi\u1ebfu y\xeau c\u1ea7u x\xe9t nghi\u1ec7m:",this.numberOfNewPatients=0,this.resetFormModalPatient(),this.restartValidFormAddPatient(),this.setOpenModalAddPatient(!0)}restartValidFormAddPatient(){this.validFormInput.isEmptyAdress=!1,this.validFormInput.isEmptyNumberPhone=!1,this.validFormInput.isEmptyRequestType=!1}cancelModalAddPatient(){this.setOpenModalAddPatient(!1)}confirmPatientModal(){const t=!this.isEmpty(this.itemPatientFormModalLab.phone);this.validFormInput.isEmptyNumberPhone=!t;const o=!this.isEmpty(this.itemPatientFormModalLab.address);this.validFormInput.isEmptyAdress=!o;const n=0!==this.itemPatientFormModalLab.valueRequestType;this.validFormInput.isEmptyRequestType=!n;const a=!this.isEmpty(this.itemPatientFormModalLab.timeSample);return this.validFormInput.isEmptyTimeSample=!a,n&&t&&o&&a}saveModalAddPatient(){this.confirmPatientModal()?(this.listPatientLab.push(JSON.parse(JSON.stringify(this.itemPatientFormModalLab))),this.generalService.addRequest({partnerId:4,userId:this.userInfo.id,dateCreated:null,appointmentDate:this.itemPatientFormModalLab.timeSample,receiveTime:null,arriveTime:null,completeTime:null,arriveLaboTime:null,returnResultReceiveTime:null,returnResultAppointmentDate:null,returnResultCompleteTime:null,address:this.itemPatientFormModalLab.address,phone:this.itemPatientFormModalLab.phone,requestTypeId:this.itemPatientFormModalLab.valueRequestType,requestSourceId:null,comment:this.itemPatientFormModalLab.notes,receiveUserId:null}).subscribe(n=>{n.ret&&0!==n.ret[0].code?this.notificationService.showMessage(c.s.DANGER,n.ret[0].message):(this.notificationService.showMessage(c.s.SUCCESS,"T\u1ea1o y\xeau c\u1ea7u th\xe0nh c\xf4ng!"),this.setOpenModalAddPatient(!1))})):this.notificationService.showMessage(c.s.DANGER,"Nh\u1eadp thi\u1ebfu tr\u01b0\u1eddng d\u1eef li\u1ec7u b\u1eaft bu\u1ed9c!")}nextModalPatient(){this.confirmPatientModal()&&(this.listPatientLab.push(JSON.parse(JSON.stringify(this.itemPatientFormModalLab))),this.numberOfNewPatients++,this.instructionModalPatient=`\u0110\xe3 th\xeam <strong>${this.numberOfNewPatients}</strong> b\u1ec7nh nh\xe2n. M\u1eddi nh\u1eadp th\xf4ng tin b\u1ec7nh nh\xe2n ti\u1ebfp theo:`,this.resetFormModalPatient())}onWillDismiss(t){}resetFormModalPatient(){this.itemPatientFormModalLab={valueRequestType:0,name:"",phone:"",address:"",timeSample:this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm:ss"),notes:""}}handleChangeSearch(t){var o=this;return(0,m.Z)(function*(){o.keywordSearch=t.target.value,o.getListRequestByPayload({page:1,pageSize:100,textSearch:o.keywordSearch,fromDate:o.filterInterval.pastTime,toDate:o.filterInterval.presentTime,phone:null,partnerId:null,receiveUserId:null,called:null,arrived:null,arrivedLabo:null,warning:null,received:null,requestTypeId:null,userCreated:null,canceled:!1},!1)})()}handleChangeSelectOrderStatus(t){var o=this;return(0,m.Z)(function*(){o.formFilterTestSheet.orderStatus=t.target.value})()}handleChangeFilterInterval(t){const o=t.target.value,n=new Date,a=new Date;n.setHours(0,0,0,0);const p=a.getDay();let u;switch(o){case 1:this.filterInterval.isShow=!1,u=0,n.setDate(n.getDate()-u),console.log("\u0110\u1ea7u ng\xe0y h\xf4m nay",n);break;case 2:this.filterInterval.isShow=!1,u=1,n.setDate(n.getDate()-u),console.log("C\xe1ch \u0111\xe2y 1 ng\xe0y tr\u01b0\u1edbc",n);break;case 3:this.filterInterval.isShow=!1,u=7,n.setDate(n.getDate()-u),console.log("C\xe1ch \u0111\xe2y 7 ng\xe0y",n);break;case 4:this.filterInterval.isShow=!1,u=14,n.setDate(n.getDate()-u),console.log("C\xe1ch \u0111\xe2y 14 ng\xe0y",n);break;case 5:this.filterInterval.isShow=!1,u=30,n.setDate(n.getDate()-u),console.log("C\xe1ch \u0111\xe2y 30 ng\xe0y",n);break;case 6:this.filterInterval.isShow=!1,u=0===p?6:p-1,n.setDate(n.getDate()-u),console.log("\u0110\u1ea7u tu\u1ea7n n\xe0y",n);break;case 7:this.filterInterval.isShow=!1,u=p+7-1,console.log("daysToSubtract",u),n.setDate(n.getDate()-u),console.log(" \u0110\u1ea7u tu\u1ea7n tr\u01b0\u1edbc",n);break;case 8:this.filterInterval.isShow=!1,n.setDate(1),console.log("\u0110\u1ea7u th\xe1ng n\xe0y",n);break;case 9:this.filterInterval.isShow=!1,n.setDate(1),n.setMonth(n.getMonth()-1),console.log("\u0110\u1ea7u th\xe1ng tr\u01b0\u1edbc ",n);break;case 10:this.filterInterval.isShow=!0;break;default:this.filterInterval.isShow=!1}o>=1&&o<=10?(this.filterInterval.pastTime=this.datePipe.transform(n,"yyyy-MM-ddTHH:mm:ss"),this.filterInterval.presentTime=this.datePipe.transform(a,"yyyy-MM-ddTHH:mm:ss")):(this.filterInterval.pastTime="",console.log("this.filterInterval.pastTime : ",this.filterInterval.pastTime),this.filterInterval.presentTime=""),this.getListRequestByPayload({page:1,pageSize:100,textSearch:this.keywordSearch,fromDate:this.filterInterval.pastTime,toDate:this.filterInterval.presentTime,phone:null,partnerId:null,receiveUserId:null,called:null,arrived:null,arrivedLabo:null,warning:null,received:null,requestTypeId:null,userCreated:null,canceled:!1},!0)}handleChangeFilterIntervalCustomByUser(t){var o=this;return(0,m.Z)(function*(){console.log("handleChangeFilterIntervalCustomByUser event",t),o.getListRequestByPayload({page:1,pageSize:100,textSearch:o.formFilterTestSheet.namePatient,fromDate:o.filterInterval.pastTime,toDate:o.filterInterval.presentTime,phone:null,partnerId:null,receiveUserId:null,called:null,arrived:null,arrivedLabo:null,warning:null,received:null,requestTypeId:null,userCreated:null,canceled:!1},!1)})()}handleChangeRequestType(t){console.log("handleChangePartner event: ",t),this.validFormInput.isEmptyRequestType=0===t.target.value}handleChangeTimeSample(t){}onSearchByFormFilter(){this.getListRequestByPayload({page:1,pageSize:100,textSearch:this.formFilterTestSheet.namePatient,fromDate:null,toDate:null,phone:this.formFilterTestSheet.phoneNoPatient,partnerId:null,receiveUserId:null,called:null,arrived:null,arrivedLabo:null,warning:null,received:null,requestTypeId:null,userCreated:null,canceled:!1},!0),this.popoverFormFilter.dismiss()}restartFormFilter(){this.formFilterTestSheet.namePatient="",this.formFilterTestSheet.phoneNoPatient="",this.orderStatusSelect.value=0}pushLog(t){console.log(t)}cancelFormFilter(){this.popoverFormFilter.dismiss()}isEmpty(t){return(new v.i).transform(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.T),e.Y36(l.Dh),e.Y36(h.F0),e.Y36(l.t4),e.Y36(C.V),e.Y36(M.K),e.Y36(l.SH),e.Y36(l.up),e.Y36(l.BX),e.Y36(q.g),e.Y36(Z.J),e.Y36(b.A),e.Y36(T.b),e.Y36(l.Br),e.Y36(A.p),e.Y36(l.HT),e.Y36(g.uU),e.Y36(x.m))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-requests"]],viewQuery:function(t,o){if(1&t&&(e.Gf(l.ki,5),e.Gf(R,5),e.Gf(S,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.modal=n.first),e.iGM(n=e.CRH())&&(o.popoverFormFilter=n.first),e.iGM(n=e.CRH())&&(o.orderStatusSelect=n.first)}},decls:29,vars:6,consts:[[1,"ion-padding"],[2,"display","flex"],["autocomplete","on","placeholder","T\xecm ki\u1ebfm ...",3,"ionChange"],["slot","start",3,"click"],["slot","icon-only","name","funnel-outline"],["size","auto",3,"isOpen","didDismiss"],["popoverFormFilter",""],[2,"display","flex","align-items","center"],["slot","start","name","calendar-clear-outline","color","primary"],["aria-label","times","interface","alert","value","0","placeholder","Ch\u1ecdn kho\u1ea3ng th\u1eddi gian l\u1ecdc ...",3,"ionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"content-laboratory"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add-outline"],[3,"isOpen"],[2,"font-size","small"],["position","stacked"],["name","call-outline"],["type","tel","placeholder","Nh\u1eadp S\u0110T ...",3,"ngModel","ngModelChange"],["name","send-outline"],["label","Tr\u1ea1ng th\xe1i \u0110\u01a1n h\xe0ng","interface","alert","label-placement","floating","placeholder","Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",2,"font-size","small",3,"interfaceOptions","ionChange"],["orderStatusSelect",""],["style","font-size: small;",3,"value",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-evenly","margin-top","0.5rem"],["size","small","fill","outline","color","medium","title","Hu\u1ef7",3,"click"],["name","close-outline"],["size","small","fill","outline","color","danger","title","Xo\xe1 l\u1ecdc",3,"click"],["size","small","name","trash-outline"],["size","small","fill","solid","title","L\u1ecdc d\u1eef li\u1ec7u ...",3,"click"],["size","small","name","search-outline"],[2,"font-size","small",3,"value"],[3,"value"],["datetime","from-datetime",2,"font-size","small"],[3,"keepContentsMounted"],["locale","vi-VI","id","from-datetime",3,"ngModel","showDefaultTitle","showDefaultButtons","showClearButton","ngModelChange","ionChange"],["fromDatetime",""],["slot","title"],["datetime","toDatetime",2,"font-size","small"],["locale","vi-VI","id","toDatetime",3,"ngModel","showDefaultTitle","showDefaultButtons","showClearButton","min","ngModelChange","ionChange"],["toDatetime",""],[1,"appointment-date"],["class","info",4,"ngIf"],[1,"request-type"],[1,"status"],[1,"info"],["name","time-outline"],[1,"text"],["name","location-outline"],[1,"text","address"],["name","pulse-outline"],[1,"text","comment"],["slot","start"],["slot","end"],[3,"innerHTML"],["position","floating"],["name","options-outline"],[2,"color","red"],["aria-label","parterns","placeholder","Ch\u1ecdn lo\u1ea1i y\xeau c\u1ea7u ...",3,"interfaceOptions","ngModel","ionChange","ngModelChange"],["class","m-error",4,"ngIf"],["type","tel","placeholder","888-888-8888",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 ...",3,"ngModel","ngModelChange","keyup"],["name","pencil-outline"],["type","text","placeholder","Th\xeam ghi ch\xfa ...",3,"ngModel","ngModelChange"],[1,"m-error"],[2,"display","flex","flex-direction","column"],["datetime","time",2,"margin-top","0.5rem","margin-bottom","0.25rem"],["size","small","locale","vi-VI","id","time",3,"ngModel","showDefaultTitle","showDefaultButtons","showClearButton","ngModelChange","ionChange"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-content",0)(1,"div")(2,"div")(3,"div",1)(4,"ion-searchbar",2),e.NdJ("ionChange",function(a){return o.handleChangeSearch(a)}),e.qZA(),e.TgZ(5,"ion-buttons",3),e.NdJ("click",function(a){return o.presentPopoverFilter(a)}),e.TgZ(6,"ion-button"),e._UZ(7,"ion-icon",4),e.qZA()(),e.TgZ(8,"ion-popover",5,6),e.NdJ("didDismiss",function(){return o.isPopoverOpenFilter=!1}),e.YNc(10,O,23,3,"ng-template"),e.qZA()(),e.TgZ(11,"div",7)(12,"ion-list")(13,"ion-item"),e._UZ(14,"ion-icon",8),e.TgZ(15,"ion-select",9),e.NdJ("ionChange",function(a){return o.handleChangeFilterInterval(a)}),e.TgZ(16,"ion-select-option",10),e._uU(17," --T\u1ea5t c\u1ea3-- "),e.qZA(),e.YNc(18,D,2,2,"ion-select-option",11),e.qZA()(),e.YNc(19,L,6,1,"ion-item",12),e.YNc(20,U,6,1,"ion-item",12),e.qZA()()(),e.TgZ(21,"div",13)(22,"ion-list"),e.YNc(23,Y,15,11,"ion-item",14),e.qZA()()(),e.TgZ(24,"ion-fab",15)(25,"ion-fab-button",16),e.NdJ("click",function(){return o.openModalPatientLab()}),e._UZ(26,"ion-icon",17),e.qZA()()(),e.TgZ(27,"ion-modal",18),e.YNc(28,$,48,12,"ng-template"),e.qZA()),2&t&&(e.xp6(8),e.Q6J("isOpen",o.isPopoverOpenFilter),e.xp6(10),e.Q6J("ngForOf",o.initDatas.baoCaoDoanhSoType),e.xp6(1),e.Q6J("ngIf",o.filterInterval.isShow),e.xp6(1),e.Q6J("ngIf",o.filterInterval.isShow),e.xp6(3),e.Q6J("ngForOf",o.listRequest),e.xp6(4),e.Q6J("isOpen",o.isModalOpenFormPatient))},dependencies:[l.YG,l.Sm,l.wI,l.W2,l.x4,l.Mj,l.IJ,l.W4,l.Gu,l.gu,l.pK,l.Ie,l.Q$,l.q_,l.VI,l.t9,l.n0,l.wd,l.sr,l.ki,l.d8,l.QI,l.j9,g.sg,g.O5,d.JJ,d.On,g.uU,E,F],styles:[".m-error[_ngcontent-%COMP%]{position:relative;z-index:1;margin-left:.8rem;min-height:18px;font-size:small;color:var(--ion-color-danger)}.content-laboratory[_ngcontent-%COMP%]{overflow:auto;max-height:calc(100vh - 15.5rem)}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.appointment-date[_ngcontent-%COMP%]{display:flex;justify-content:space-between;justify-items:center}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.appointment-date[_ngcontent-%COMP%]   div.request-type[_ngcontent-%COMP%]{display:inline-block;padding:.25rem;margin-top:.25rem;border-radius:.25rem;background-color:#91b5e4;color:#fff}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.info[_ngcontent-%COMP%]{display:flex;padding:.25rem}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.info[_ngcontent-%COMP%]   h3.text[_ngcontent-%COMP%]{margin-left:.25rem}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.info[_ngcontent-%COMP%]   h3.address[_ngcontent-%COMP%]{white-space:break-spaces}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.info[_ngcontent-%COMP%]   h3.comment[_ngcontent-%COMP%]{white-space:break-spaces}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.status[_ngcontent-%COMP%]{display:inline-block;padding:.25rem;margin-top:.25rem;border-radius:.25rem;background-color:#b5e0ff}"]}),i})()}];let X=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(W),h.Bz]}),i})();var ee=r(3913);let te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[T.b],imports:[l.Pc,g.ez,d.u5,y.e,X,ee.m]}),i})()}}]);