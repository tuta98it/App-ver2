"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1666],{1666:(pt,y,l)=>{l.r(y),l.d(y,{LaboratoryPageModule:()=>nt});var s=l(7331),d=l(6895),p=l(4719),T=l(581),m=l(6069),h=l(5861),_=l(6443),P=l(4904),t=l(6738),v=l(2680),C=l(1188),Z=l(849),E=l(2013),x=l(1557),F=l(5930),b=l(7638),L=l(2365),M=l(7802);let S=(()=>{class o extends L.b{constructor(){super(...arguments),this.serviceUrl=M.Y.URL_ORDER}getOrders(e){return this.post(this.serviceUrl+"/GetOrders",e)}createOrder(e){return this.post(M.Y.LIST_ORDER,e)}}return o.\u0275fac=function(){let r;return function(i){return(r||(r=t.n5z(o)))(i||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=l(888);let O=(()=>{class o{transform(e,i){return i.find(a=>a.id===e).name}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"orderStatus",type:o,pure:!0}),o})();const D=["popoverFormFilter"],I=["orderStatusSelect"];function w(o,r){if(1&o&&(t.TgZ(0,"ion-select-option",35),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function N(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"ion-content",0)(1,"ion-label",18),t._uU(2,"L\u1ecdc d\u1eef li\u1ec7u theo ..."),t.qZA(),t.TgZ(3,"ion-list")(4,"ion-item",18)(5,"ion-label",19),t._UZ(6,"ion-icon",20),t._uU(7," T\xean b\u1ec7nh nh\xe2n "),t.qZA(),t.TgZ(8,"ion-input",21),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.formFilterTestSheet.namePatient=n)}),t.qZA()(),t.TgZ(9,"ion-item",18)(10,"ion-label",19),t._UZ(11,"ion-icon",22),t._uU(12," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.qZA(),t.TgZ(13,"ion-input",23),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.formFilterTestSheet.phoneNoPatient=n)}),t.qZA()(),t.TgZ(14,"ion-item",18)(15,"ion-label",19),t._UZ(16,"ion-icon",24),t._uU(17," Tr\u1ea1ng th\xe1i \u0110\u01a1n h\xe0ng "),t.qZA(),t.TgZ(18,"ion-select",25,26),t.NdJ("ionChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.handleChangeSelectOrderStatus(n))}),t.YNc(20,w,2,2,"ion-select-option",27),t.qZA()()(),t.TgZ(21,"ion-buttons",28)(22,"ion-button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.cancelFormFilter())}),t._UZ(23,"ion-icon",30),t.qZA(),t.TgZ(24,"ion-button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.restartFormFilter())}),t._UZ(25,"ion-icon",32),t.qZA(),t.TgZ(26,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSearchByFormFilter())}),t._UZ(27,"ion-icon",34),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("ngModel",e.formFilterTestSheet.namePatient),t.xp6(5),t.Q6J("ngModel",e.formFilterTestSheet.phoneNoPatient),t.xp6(5),t.Q6J("interfaceOptions",e.customPopoverOptions),t.xp6(2),t.Q6J("ngForOf",e.initDatas.orderStatus)}}function U(o,r){if(1&o&&(t.TgZ(0,"ion-select-option",36),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function J(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"ion-datetime",39,40),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.filterInterval.pastTime=n)})("ionChange",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleChangeFilterIntervalCustomByUser(n))}),t.TgZ(2,"span",41),t._uU(3,"Ch\u1ecdn th\u1eddi gian b\u1eaft \u0111\u1ea7u"),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("ngModel",e.filterInterval.pastTime)("showDefaultTitle",!0)("showDefaultButtons",!0)("showClearButton",!0)}}function k(o,r){1&o&&(t.TgZ(0,"ion-item")(1,"span"),t._uU(2,"T\u1eeb ng\xe0y: "),t.qZA(),t._UZ(3,"ion-datetime-button",37),t.TgZ(4,"ion-modal",38),t.YNc(5,J,4,4,"ng-template"),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("keepContentsMounted",!0))}function q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"ion-datetime",43,44),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.filterInterval.presentTime=n)})("ionChange",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleChangeFilterIntervalCustomByUser(n))}),t.TgZ(2,"span",41),t._uU(3,"Ch\u1ecdn th\u1eddi gian b\u1eaft \u0111\u1ea7u"),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("ngModel",e.filterInterval.presentTime)("showDefaultTitle",!0)("showDefaultButtons",!0)("showClearButton",!0)("min",e.filterInterval.pastTime)}}function H(o,r){1&o&&(t.TgZ(0,"ion-item")(1,"span"),t._uU(2,"\u0110\u1ebfn ng\xe0y: "),t.qZA(),t._UZ(3,"ion-datetime-button",42),t.TgZ(4,"ion-modal",38),t.YNc(5,q,4,5,"ng-template"),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("keepContentsMounted",!0))}function B(o,r){if(1&o&&(t.TgZ(0,"h3",48),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.lnq("",t.xi3(2,3,e.dateCreated,"ddMMyy"),"-",e.code," ",e.patient.name,"")}}function Y(o,r){if(1&o&&(t.TgZ(0,"div",49)(1,"div"),t._UZ(2,"ion-icon",22),t.qZA(),t.TgZ(3,"h3",50),t._uU(4),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.patient.phoneNo)}}function G(o,r){if(1&o&&(t.TgZ(0,"div",49)(1,"div"),t._UZ(2,"ion-icon",51),t.qZA(),t.TgZ(3,"h3",52),t._uU(4),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.patient.address)}}function Q(o,r){if(1&o&&(t.TgZ(0,"div",49)(1,"div"),t._UZ(2,"ion-icon",53),t.qZA(),t.TgZ(3,"h3",50),t._uU(4),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.chanDoan)}}function K(o,r){if(1&o&&(t.TgZ(0,"div",54)(1,"h3"),t._uU(2),t.ALo(3,"orderStatus"),t.qZA()()),2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Oqu(i.initDatas?t.xi3(3,1,e.status,null==i.initDatas?null:i.initDatas.orderStatus):e.status)}}function V(o,r){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-label"),t.YNc(2,B,3,6,"h3",45),t.ALo(3,"isEmpty"),t.YNc(4,Y,5,1,"div",46),t.ALo(5,"isEmpty"),t.YNc(6,G,5,1,"div",46),t.ALo(7,"isEmpty"),t.YNc(8,Q,5,1,"div",46),t.ALo(9,"isEmpty"),t.YNc(10,K,4,4,"div",47),t.ALo(11,"isEmpty"),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.Q6J("ngIf",!t.lcZ(3,5,e.code)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(5,7,e.patient.phoneNo)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(7,9,e.patient.address)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(9,11,e.chanDoan)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(11,13,e.status))}}function z(o,r){1&o&&(t.TgZ(0,"span",69),t._uU(1,"*T\xean b\u1ec7nh nh\xe2n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"),t.qZA())}function R(o,r){1&o&&(t.TgZ(0,"span",69),t._uU(1,"*S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"),t.qZA())}function $(o,r){1&o&&(t.TgZ(0,"span",69),t._uU(1,"*\u0110\u1ecba ch\u1ec9 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"),t.qZA())}function W(o,r){1&o&&(t.TgZ(0,"span",69),t._uU(1,"*TT \u0110\u1ed1i t\xe1c kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"),t.qZA())}function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",55)(3,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setOpenModalAddPatient(!1))}),t._uU(4,"Hu\u1ef7"),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6),t.qZA(),t.TgZ(7,"ion-buttons",56)(8,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveModalAddPatient())}),t._uU(9,"L\u01b0u"),t.qZA()()()(),t.TgZ(10,"ion-content",0),t._UZ(11,"label",57),t.TgZ(12,"div")(13,"ion-col")(14,"ion-item")(15,"ion-label",58),t._UZ(16,"ion-icon",20),t._uU(17," T\xean b\u1ec7nh nh\xe2n "),t.TgZ(18,"span",59),t._uU(19,"*"),t.qZA()(),t.TgZ(20,"ion-input",60),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.itemPatientFormModalLab.name=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onKeyUpInputNamePatient())}),t.qZA()(),t.YNc(21,z,2,0,"span",61),t.qZA(),t.TgZ(22,"ion-col")(23,"ion-item")(24,"ion-label",58),t._UZ(25,"ion-icon",22),t._uU(26," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(27,"span",59),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"ion-input",62),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.itemPatientFormModalLab.phone=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onKeyUpInputNumberPhone())}),t.qZA()(),t.YNc(30,R,2,0,"span",61),t.qZA(),t.TgZ(31,"ion-col")(32,"ion-item")(33,"ion-label",58),t._UZ(34,"ion-icon",51),t._uU(35," \u0110\u1ecba ch\u1ec9 "),t.TgZ(36,"span",59),t._uU(37,"*"),t.qZA()(),t.TgZ(38,"ion-input",63),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.itemPatientFormModalLab.address=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onKeyUpInputAddress())}),t.qZA()(),t.YNc(39,$,2,0,"span",61),t.qZA(),t.TgZ(40,"ion-col")(41,"ion-item")(42,"ion-label",58),t._UZ(43,"ion-icon",51),t._uU(44," TT \u0110\u1ed1i t\xe1c "),t.TgZ(45,"span",59),t._uU(46,"*"),t.qZA()(),t.TgZ(47,"ion-input",64),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.itemPatientFormModalLab.partner=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onKeyUpInputAddress())}),t.qZA()(),t.YNc(48,W,2,0,"span",61),t.qZA(),t.TgZ(49,"ion-item")(50,"ion-label",58),t._UZ(51,"ion-icon",65),t._uU(52," Ghi ch\xfa "),t.qZA(),t.TgZ(53,"ion-input",66),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.itemPatientFormModalLab.notes=n)}),t.qZA()()(),t.TgZ(54,"div",67)(55,"ion-buttons",68)(56,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.nextModalPatient())}),t._uU(57," L\u01b0u v\xe0 th\xeam m\u1edbi ... "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(6),t.Oqu(e.titleModalAddPatient),t.xp6(5),t.Q6J("innerHTML",e.instructionModalPatient,t.oJD),t.xp6(9),t.Q6J("ngModel",e.itemPatientFormModalLab.name),t.xp6(1),t.Q6J("ngIf",e.validFormInput.isEmptyFullName),t.xp6(8),t.Q6J("ngModel",e.itemPatientFormModalLab.phone),t.xp6(1),t.Q6J("ngIf",e.validFormInput.isEmptyNumberPhone),t.xp6(8),t.Q6J("ngModel",e.itemPatientFormModalLab.address),t.xp6(1),t.Q6J("ngIf",e.validFormInput.isEmptyAdress),t.xp6(8),t.Q6J("ngModel",e.itemPatientFormModalLab.partner),t.xp6(1),t.Q6J("ngIf",e.validFormInput.isEmptyAdress),t.xp6(5),t.Q6J("ngModel",e.itemPatientFormModalLab.notes)}}const X=[{path:"",component:(()=>{class o{constructor(e,i,n,a,c,u,f,g,ot,it,at,rt,st,lt,ut,ct,dt,gt){this.photoService=e,this.popoverController=i,this.router=n,this.platform=a,this.localStorage=c,this.storage=u,this.navCtrl=f,this.pickerCtrl=g,this.actionSheetCtrl=ot,this.notificationService=it,this.mainService=at,this.badgeService=rt,this.appVersion=st,this.alertController=lt,this.orderService=ut,this.loadingCtrl=ct,this.datePipe=dt,this.generalService=gt,this.isPopoverOpenFilter=!1,this.titleModalAddPatient="Th\xeam y\xeau c\u1ea7u",this.instructionModalPatient="M\u1eddi nh\u1eadp th\xf4ng tin b\u1ec7nh nh\xe2n \u0111\u1ea7u ti\xean:",this.numberOfNewPatients=0,this.isModalOpenFormPatient=!1,this.validFormInput={isEmptyFullName:!1,isEmptyNumberPhone:!1,isEmptyAdress:!1,isEmptyInfoPartner:!1},this.customPopoverOptions={subHeader:"Ch\u1ecdn tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng c\u1ea7n l\u1ecdc"},this.itemPatientFormModalLab={name:"",phone:"",address:"",conditon:"",status:"",notes:"",partner:""},this.listPatientLab=[{name:"1234-1643 Tr\u1ea7n V\u0103n A",phone:"0981123574",address:"CT6 Khu \u0111\xf4 th\u1ecb Vi\u1ec7t H\u01b0ng, Long Bi\xean, H\xe0 N\u1ed9i",conditon:"Vi\xeam lo\xe9t d\u1ea1 d\xe0y t\xe1 tr\xe0ng",status:"Ch\u01b0a nh\u1eadn y\xeau c\u1ea7u",notes:""},{name:"1234 - 2341 Tr\u1ea7n Th\u1ecb L\xfd",phone:"0234538592",address:"257 Gi\u1ea3i ph\xf3ng, Hai B\xe0 Tr\u01b0ng, H\xe0 N\u1ed9i",conditon:"S\u1ed1t xu\u1ea5t huy\u1ebft",status:"\u0110\xe3 nh\u1eadn y\xeau c\u1ea7u v\xe0 \u0111ang x\u1eed l\xfd",notes:""},{name:"1234 - 1643 L\xfd Thu\u1ef3 Linh",phone:"0903245394",address:"40 Ph\u01b0\u1eddng Li\u1ec7t, Thanh Xu\xe2n, H\xe0 N\u1ed9i",conditon:"Vi\xeam gan A",status:"\u0110\xe3 tr\u1ea3 k\u1ebft qu\u1ea3",notes:""}],this.listOrder=[],this.formFilterTestSheet={namePatient:"",phoneNoPatient:"",orderStatus:0},this.filterInterval={isShow:!1,presentTime:"",pastTime:""},this.now=new Date,this.listPatientLab=[{name:"1234-1643 Tr\u1ea7n V\u0103n A",phone:"0981123574",address:"CT6 Khu \u0111\xf4 th\u1ecb Vi\u1ec7t H\u01b0ng, Long Bi\xean, H\xe0 N\u1ed9i",conditon:"Vi\xeam lo\xe9t d\u1ea1 d\xe0y t\xe1 tr\xe0ng",status:"Ch\u01b0a nh\u1eadn y\xeau c\u1ea7u",notes:""},{name:"1234 - 2341 Tr\u1ea7n Th\u1ecb L\xfd",phone:"0234538592",address:"257 Gi\u1ea3i ph\xf3ng, Hai B\xe0 Tr\u01b0ng, H\xe0 N\u1ed9i",conditon:"S\u1ed1t xu\u1ea5t huy\u1ebft",status:"\u0110\xe3 nh\u1eadn y\xeau c\u1ea7u v\xe0 \u0111ang x\u1eed l\xfd",notes:""},{name:"1234 - 1643 L\xfd Thu\u1ef3 Linh",phone:"0903245394",address:"40 Ph\u01b0\u1eddng Li\u1ec7t, Thanh Xu\xe2n, H\xe0 N\u1ed9i",conditon:"Vi\xeam gan A",status:"\u0110\xe3 tr\u1ea3 k\u1ebft qu\u1ea3",notes:""}]}onKeyUpInputNamePatient(){this.validFormInput.isEmptyFullName=this.isEmpty(this.itemPatientFormModalLab.name)}onKeyUpInputNumberPhone(){this.validFormInput.isEmptyNumberPhone=this.isEmpty(this.itemPatientFormModalLab.phone)}onKeyUpInputAddress(){this.validFormInput.isEmptyAdress=this.isEmpty(this.itemPatientFormModalLab.address)}selectPartner(){this.validFormInput.isEmptyInfoPartner=this.isEmpty(this.itemPatientFormModalLab.partner)}ionViewDidLoad(){console.log("ionViewDidLoad")}ionViewWillLeave(){console.log("ionViewWillLeave")}ionViewDidLeave(){console.log("ionViewDidLeave")}ionViewWillUnload(){console.log("ionViewWillUnload")}ionViewDidEnter(){console.log("ionViewDidEnter")}ionViewWillEnter(){return(0,h.Z)(function*(){console.log("ionViewWillEnter")})()}ngOnInit(){var e=this;return(0,h.Z)(function*(){console.log("ngOnInit"),e.localStorage.getSelectedUser().then(i=>{e.userInfo=i}),e.getListInitialData(),yield e.getListOrder()})()}showLoading(){var e=this;return(0,h.Z)(function*(){(yield e.loadingCtrl.create({message:"D\u1eef li\u1ec7u \u0111ang t\u1ea3i l\xean sau 2 gi\xe2y ...",duration:2e3})).present()})()}getListOrder(){this.showLoading(),this.orderService.getOrders({barcode:"",patient:"",status:0,fromDate:"",toDate:"",assignToUserId:0,counselors:null,partnerId:0,isSendSMS:null,isPrintResult:null,patientAge:null,phoneNo:null,keyword:"",pageSize:50,page:1}).subscribe(i=>{null!=i&&(this.listOrder=i.data,console.log("this.listOrder : ",this.listOrder))},i=>{403===i.status?(this.notificationService.showMessage("danger","Ng\u01b0\u1eddi d\xf9ng c\xf3 quy\u1ec1n truy c\u1eadp"),this.router.navigate(["/login"])):this.notificationService.showMessage("danger","D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")})}getListInitialData(){this.initDatas=JSON.parse(localStorage.getItem(_.s.INIT_DATA))}presentPopoverFilter(e){this.popoverFormFilter.event=e,this.isPopoverOpenFilter=!0}showProfile(){}logout(){this.localStorage.clearAll(),this.popoverController.dismiss(),this.router.navigate(["/"])}doRefresh(e){}setOpenModalAddPatient(e){this.isModalOpenFormPatient=e}openModalPatientLab(){this.instructionModalPatient="M\u1eddi nh\u1eadp th\xf4ng tin b\u1ec7nh nh\xe2n \u0111\u1ea7u ti\xean:",this.numberOfNewPatients=0,this.setOpenModalAddPatient(!0)}cancelModalAddPatient(){this.setOpenModalAddPatient(!1)}confirmPatientModal(){const e=!this.isEmpty(this.itemPatientFormModalLab.name);e||(this.validFormInput.isEmptyFullName=!0);const i=!this.isEmpty(this.itemPatientFormModalLab.phone);i||(this.validFormInput.isEmptyNumberPhone=!0);const n=!this.isEmpty(this.itemPatientFormModalLab.address);return n||(this.validFormInput.isEmptyAdress=!0),e&&i&&n}saveModalAddPatient(){this.confirmPatientModal()&&(this.listPatientLab.push(JSON.parse(JSON.stringify(this.itemPatientFormModalLab))),this.generalService.createOrder({id:0,patientId:0,code:"",name:"",orderDoctor:"",orderDate:"",visitCode:"",visiteDate:"",chanDoan:"",khoa:"",buong:"",giuong:"",status:0,phoneNo:"",address:"",note:this.itemPatientFormModalLab.notes,partnerId:0,details:[{orderTypeId:0,price:0}],paymentType:1,patient:{id:0,code:"",name:this.itemPatientFormModalLab.name,sex:0,dob:"",yob:0,cmnd:"",address:this.itemPatientFormModalLab.address,phoneNo:this.itemPatientFormModalLab.phone,email:""},momWeight:0,momHeightCM:0,ultrasoundDate:"",gestationalWeek:0,gestationalDay:0,pregnancyNo:0,fetusAmount:0,nt:0,crl:0,expectedDateOfBirth:"",requestId:0,lat:0,lng:0,assignToUserId:0,specimenID:"",privateNote:"",discountPaymentType:0,extraDiscountPaymentType:0,bsdiscountPaymentType:0,paidType:0,utmSource:"",dateTakenSpecimen:"",addressLongitude:0,addressLatitude:0}).subscribe(i=>{i.isValid?(console.log("generalService res",i),this.resetFormModalPatient(),this.notificationService.showMessage(_.s.SUCCESS,`\u0110\xe3 t\u1ea1o phi\u1ebfu x\xe9t nghi\u1ec7m cho BN ${this.itemPatientFormModalLab.name}`),this.setOpenModalAddPatient(!1)):this.notificationService.showMessage(_.s.ERROR,`\u0110\xe3 c\xf3 l\u1ed7i : ${i.errors[0].errorMessage}`)},i=>{}))}nextModalPatient(){this.confirmPatientModal()&&(this.listPatientLab.push(JSON.parse(JSON.stringify(this.itemPatientFormModalLab))),this.numberOfNewPatients++,this.instructionModalPatient=`\u0110\xe3 th\xeam <strong>${this.numberOfNewPatients}</strong> b\u1ec7nh nh\xe2n. M\u1eddi nh\u1eadp th\xf4ng tin b\u1ec7nh nh\xe2n ti\u1ebfp theo:`,this.resetFormModalPatient())}onWillDismiss(e){}resetFormModalPatient(){this.itemPatientFormModalLab={name:"",phone:"",address:"",conditon:"",status:"",notes:"",partner:""}}handleChangeSearch(e){this.keywordSearch=e.target.value,this.orderService.getOrders({barcode:"",patient:"",status:0,fromDate:"",toDate:"",assignToUserId:0,counselors:null,partnerId:0,isSendSMS:null,isPrintResult:null,patientAge:null,phoneNo:null,keyword:this.keywordSearch,pageSize:50,page:1}).subscribe(n=>{null!=n&&(this.listOrder=n.data,console.log("this.listOrder Search: ",this.listOrder))},n=>{this.notificationService.showMessage("danger","D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")})}handleChangeSelectOrderStatus(e){this.formFilterTestSheet.orderStatus=e.target.value}handleChangeFilterInterval(e){const i=e.target.value,n=new Date,a=new Date;n.setHours(0,0,0,0);const c=a.getDay();let u;switch(i){case 1:this.filterInterval.isShow=!1,u=0,n.setDate(n.getDate()-u),console.log("\u0110\u1ea7u ng\xe0y h\xf4m nay",n);break;case 2:this.filterInterval.isShow=!1,u=1,n.setDate(n.getDate()-u),console.log("C\xe1ch \u0111\xe2y 1 ng\xe0y tr\u01b0\u1edbc",n);break;case 3:this.filterInterval.isShow=!1,u=7,n.setDate(n.getDate()-u),console.log("C\xe1ch \u0111\xe2y 7 ng\xe0y",n);break;case 4:this.filterInterval.isShow=!1,u=14,n.setDate(n.getDate()-u),console.log("C\xe1cg \u0111\xe2y 14 ng\xe0y",n);break;case 5:this.filterInterval.isShow=!1,u=30,n.setDate(n.getDate()-u),console.log("C\xe1ch \u0111\xe2y 30 ng\xe0y",n);break;case 6:this.filterInterval.isShow=!1,u=0===c?6:c-1,n.setDate(n.getDate()-u),console.log("\u0110\u1ea7u tu\u1ea7n n\xe0y",n);break;case 7:this.filterInterval.isShow=!1,u=c+7-1,console.log("daysToSubtract",u),n.setDate(n.getDate()-u),console.log(" \u0110\u1ea7u tu\u1ea7n tr\u01b0\u1edbc",n);break;case 8:this.filterInterval.isShow=!1,n.setDate(1),console.log("\u0110\u1ea7u th\xe1ng n\xe0y",n);break;case 9:this.filterInterval.isShow=!1,n.setDate(1),n.setMonth(n.getMonth()-1),console.log("\u0110\u1ea7u th\xe1ng tr\u01b0\u1edbc ",n);break;case 10:this.filterInterval.isShow=!0,this.filterInterval.pastTime=this.datePipe.transform(n,"yyyy-MM-ddTHH:mm:ss"),this.filterInterval.presentTime=this.datePipe.transform(a,"yyyy-MM-ddTHH:mm:ss")}this.showLoading(),this.orderService.getOrders({barcode:"",patient:"",status:0,fromDate:n,toDate:a,assignToUserId:0,counselors:null,partnerId:0,isSendSMS:null,isPrintResult:null,patientAge:null,phoneNo:"",keyword:"",pageSize:100,page:1}).subscribe(g=>{null!=g&&(this.listOrder=g.data,console.log("onSearchByFormFilter this.listOrder : ",this.listOrder))},g=>{this.notificationService.showMessage("danger","D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")})}handleChangeFilterIntervalCustomByUser(e){console.log("handleChangeFilterIntervalCustomByUser event",e);const i=this.filterInterval.pastTime,n=this.filterInterval.presentTime;this.showLoading(),this.orderService.getOrders({barcode:"",patient:"",status:0,fromDate:i,toDate:n,assignToUserId:0,counselors:null,partnerId:0,isSendSMS:null,isPrintResult:null,patientAge:null,phoneNo:"",keyword:"",pageSize:100,page:1}).subscribe(c=>{null!=c&&(this.listOrder=c.data,console.log("onSearchByFormFilter this.listOrder : ",this.listOrder))},c=>{this.notificationService.showMessage("danger","D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")})}onSearchByFormFilter(){this.showLoading(),this.orderService.getOrders({barcode:"",patient:"",status:this.formFilterTestSheet.orderStatus,fromDate:"",toDate:"",assignToUserId:0,counselors:null,partnerId:0,isSendSMS:null,isPrintResult:null,patientAge:null,phoneNo:this.formFilterTestSheet.phoneNoPatient,keyword:this.formFilterTestSheet.namePatient,pageSize:100,page:1}).subscribe(i=>{null!=i&&(this.listOrder=i.data,console.log("onSearchByFormFilter this.listOrder : ",this.listOrder))},i=>{this.notificationService.showMessage("danger","D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra")}),this.popoverFormFilter.dismiss()}restartFormFilter(){this.formFilterTestSheet.namePatient="",this.formFilterTestSheet.phoneNoPatient="",this.orderStatusSelect.value=0}cancelFormFilter(){this.popoverFormFilter.dismiss()}isEmpty(e){return(new P.i).transform(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.T),t.Y36(s.Dh),t.Y36(m.F0),t.Y36(s.t4),t.Y36(C.V),t.Y36(Z.K),t.Y36(s.SH),t.Y36(s.up),t.Y36(s.BX),t.Y36(E.g),t.Y36(x.J),t.Y36(F.A),t.Y36(b.b),t.Y36(s.Br),t.Y36(S),t.Y36(s.HT),t.Y36(d.uU),t.Y36(A.m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-laboratory"]],viewQuery:function(e,i){if(1&e&&(t.Gf(s.ki,5),t.Gf(D,5),t.Gf(I,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.modal=n.first),t.iGM(n=t.CRH())&&(i.popoverFormFilter=n.first),t.iGM(n=t.CRH())&&(i.orderStatusSelect=n.first)}},decls:27,vars:6,consts:[[1,"ion-padding"],[2,"display","flex"],["autocomplete","on","placeholder","T\xecm ki\u1ebfm ...",3,"ionChange"],["slot","start",3,"click"],["slot","icon-only","name","funnel-outline"],["size","auto",3,"isOpen","didDismiss"],["popoverFormFilter",""],[2,"display","flex","align-items","center"],["slot","start","name","calendar-clear-outline","color","primary"],["aria-label","times","interface","alert","placeholder","Ch\u1ecdn kho\u1ea3ng th\u1eddi gian l\u1ecdc ...",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"content-laboratory"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add-outline"],[3,"isOpen"],[2,"font-size","small"],["position","stacked"],["name","person-outline"],["placeholder","Nh\u1eadp t\xean b\u1ec7nh nh\xe2n ...",3,"ngModel","ngModelChange"],["name","call-outline"],["type","tel","placeholder","Nh\u1eadp S\u0110T ...",3,"ngModel","ngModelChange"],["name","send-outline"],["label","Tr\u1ea1ng th\xe1i \u0110\u01a1n h\xe0ng","interface","alert","label-placement","floating","placeholder","Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",2,"font-size","small",3,"interfaceOptions","ionChange"],["orderStatusSelect",""],["style","font-size: small;",3,"value",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-evenly","margin-top","0.5rem"],["size","small","fill","outline","color","medium","title","Hu\u1ef7",3,"click"],["name","close-outline"],["size","small","fill","outline","color","danger","title","Xo\xe1 l\u1ecdc",3,"click"],["size","small","name","trash-outline"],["size","small","fill","solid","title","L\u1ecdc d\u1eef li\u1ec7u ...",3,"click"],["size","small","name","search-outline"],[2,"font-size","small",3,"value"],[3,"value"],["datetime","from-datetime"],[3,"keepContentsMounted"],["locale","vi-VI","id","from-datetime",3,"ngModel","showDefaultTitle","showDefaultButtons","showClearButton","ngModelChange","ionChange"],["fromDatetime",""],["slot","title"],["datetime","toDatetime"],["locale","vi-VI","id","toDatetime",3,"ngModel","showDefaultTitle","showDefaultButtons","showClearButton","min","ngModelChange","ionChange"],["toDatetime",""],["class","name-patient",4,"ngIf"],["class","info",4,"ngIf"],["class","status",4,"ngIf"],[1,"name-patient"],[1,"info"],[1,"text"],["name","location-outline"],[1,"text","address"],["name","pulse-outline"],[1,"status"],["slot","start"],["slot","end"],[3,"innerHTML"],["position","floating"],[2,"color","red"],["type","text","placeholder","Nh\u1eadp t\xean b\u1ec7nh nh\xe2n ...",3,"ngModel","ngModelChange","keyup"],["class","m-error",4,"ngIf"],["type","tel","placeholder","888-888-8888",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 ...",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","Nh\u1eadp TT \u0110\u1ed1i t\xe1c ...",3,"ngModel","ngModelChange","keyup"],["name","pencil-outline"],["type","text","placeholder","Th\xeam ghi ch\xfa ...",3,"ngModel","ngModelChange"],[2,"margin-top","1rem","display","flex","justify-content","end"],["slot","primary"],[1,"m-error"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content",0)(1,"div")(2,"div")(3,"div",1)(4,"ion-searchbar",2),t.NdJ("ionChange",function(a){return i.handleChangeSearch(a)}),t.qZA(),t.TgZ(5,"ion-buttons",3),t.NdJ("click",function(a){return i.presentPopoverFilter(a)}),t.TgZ(6,"ion-button"),t._UZ(7,"ion-icon",4),t.qZA()(),t.TgZ(8,"ion-popover",5,6),t.NdJ("didDismiss",function(){return i.isPopoverOpenFilter=!1}),t.YNc(10,N,28,4,"ng-template"),t.qZA()(),t.TgZ(11,"div",7)(12,"ion-list")(13,"ion-item"),t._UZ(14,"ion-icon",8),t.TgZ(15,"ion-select",9),t.NdJ("ionChange",function(a){return i.handleChangeFilterInterval(a)}),t.YNc(16,U,2,2,"ion-select-option",10),t.qZA()(),t.YNc(17,k,6,1,"ion-item",11),t.YNc(18,H,6,1,"ion-item",11),t.qZA()()(),t.TgZ(19,"div",12)(20,"ion-list"),t.YNc(21,V,12,15,"ion-item",13),t.qZA()()(),t.TgZ(22,"ion-fab",14)(23,"ion-fab-button",15),t.NdJ("click",function(){return i.openModalPatientLab()}),t._UZ(24,"ion-icon",16),t.qZA()()(),t.TgZ(25,"ion-modal",17),t.YNc(26,j,58,11,"ng-template"),t.qZA()),2&e&&(t.xp6(8),t.Q6J("isOpen",i.isPopoverOpenFilter),t.xp6(8),t.Q6J("ngForOf",i.initDatas.baoCaoDoanhSoType),t.xp6(1),t.Q6J("ngIf",i.filterInterval.isShow),t.xp6(1),t.Q6J("ngIf",i.filterInterval.isShow),t.xp6(3),t.Q6J("ngForOf",i.listOrder),t.xp6(4),t.Q6J("isOpen",i.isModalOpenFormPatient))},dependencies:[s.YG,s.Sm,s.wI,s.W2,s.x4,s.Mj,s.IJ,s.W4,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.q_,s.VI,s.t9,s.n0,s.wd,s.sr,s.ki,s.d8,s.QI,s.j9,d.sg,d.O5,p.JJ,p.On,d.uU,P.i,O],styles:[".m-error[_ngcontent-%COMP%]{position:relative;z-index:1;margin-left:.8rem;min-height:18px;font-size:small;color:var(--ion-color-danger)}.content-laboratory[_ngcontent-%COMP%]{overflow:auto;max-height:calc(100vh - 15.5rem)}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3.name-patient[_ngcontent-%COMP%]{font-weight:600}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.info[_ngcontent-%COMP%]{display:flex;padding:.25rem}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.info[_ngcontent-%COMP%]   h3.text[_ngcontent-%COMP%]{margin-left:.25rem}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.info[_ngcontent-%COMP%]   h3.address[_ngcontent-%COMP%]{white-space:break-spaces}.content-laboratory[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   div.status[_ngcontent-%COMP%]{display:inline-block;padding:.25rem;margin-top:.25rem;border-radius:.25rem;background-color:#b5e0ff}"]}),o})()}];let tt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(X),m.Bz]}),o})();var et=l(3913);let nt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[b.b],imports:[s.Pc,d.ez,p.u5,T.e,tt,et.m]}),o})()}}]);