{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":"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","sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts","./src/app/pages/login/login.page.html","./src/app/services/auth.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule,\r\n    HttpClientModule\r\n  ],\r\n  providers: [AuthService],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MainService } from '../../services/main.service';\r\nimport { Constant } from '../../shared/constants/constant.class';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\nimport { Storage } from '@ionic/storage';\r\nimport { LoadingController, NavController, Platform, ToastController } from '@ionic/angular';\r\nimport { StorageService } from '../../services/storage.service';\r\nimport { NotificationService } from '../../services/notification.service';\r\nimport { GeneralService } from 'src/app/services/general-service';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n  username: any;\r\n  password: any;\r\n  deviceInfo: any;\r\n\r\n  constructor(\r\n    private mainService: MainService,\r\n    private http: HttpClient,\r\n    private router: Router,\r\n    private storage: Storage,\r\n    public loadingController: LoadingController,\r\n    public toastController: ToastController,\r\n    private localStorage: StorageService,\r\n    private notificationService: NotificationService,\r\n    protected platform: Platform,\r\n    public navCtrl: NavController,\r\n    private generalService: GeneralService,\r\n    private authService: AuthService,\r\n  ) {\r\n  }\r\n\r\n  async ngOnInit() {\r\n    // this.localStorage.getSelectedUser().then((res) => {\r\n    //   if (res) {\r\n    //     this.navCtrl.navigateRoot(['/main/laboratory']);\r\n    //   }\r\n    // });\r\n    this.localStorage.get('deviceInfo').then(res => {\r\n      this.deviceInfo = res;\r\n      // console.log(this.deviceInfo);\r\n    });\r\n\r\n\r\n    // Xác thực người dùng\r\n    this.authService.checkToken().subscribe((res: any) => {\r\n      // console.log('this.authService.checkToken() res : ', res);\r\n      const objRes = res.ret[0];\r\n      const codeRes = objRes.code;\r\n      if (res.ret) {\r\n        if (codeRes === 0) {\r\n          // Success\r\n          this.router.navigate(['/main/requests']);\r\n        } else if (codeRes === 401) {\r\n          // Code 401: Không xác thực được người dùng;\r\n          localStorage.removeItem(Constant.TOKEN);\r\n          localStorage.removeItem(Constant.USER_INFO);\r\n          this.router.navigate(['/login']);\r\n          this.notificationService.showMessage(Constant.DANGER, `${codeRes}: Hệ thống không xác thực được người dùng`);\r\n        } else if (codeRes === 403) {\r\n          // Code 403: Người dùng không có quyền truy cập vào hệ thống.\r\n          localStorage.removeItem(Constant.TOKEN);\r\n          localStorage.removeItem(Constant.USER_INFO);\r\n          this.router.navigate(['/login']);\r\n          this.notificationService.showMessage(Constant.DANGER, `${codeRes}: Người dùng không có quyền truy cập`);\r\n        } else {\r\n          this.notificationService.showMessage(Constant.DANGER, `${codeRes}: Lỗi hệ thống, vui lòng liên hệ quản trị viên`);\r\n        }\r\n      } else {\r\n        this.notificationService.showMessage(Constant.DANGER, 'Lỗi hệ thống, vui lòng liên hệ quản trị viên');\r\n      }\r\n    });\r\n\r\n    // Set INIT_DATA for local-storage\r\n    await this.setInitData();\r\n  }\r\n\r\n  setInitData() {\r\n    this.generalService.getInitialData().subscribe((resData: any) => {\r\n      if (resData !== null) {\r\n        localStorage.setItem(Constant.INIT_DATA, JSON.stringify(resData));\r\n      }\r\n    }, error => {\r\n      // console.log('Error Set INIT_DATA for local-storage');\r\n    });\r\n  }\r\n\r\n  showAlertPassword() {\r\n    this.notificationService.showMessage(Constant.WARNING, 'Vui lòng liên hệ quản trị viên để cấp lại mật khẩu');\r\n  }\r\n  async doLogin() {\r\n    if (!this.username) {\r\n      this.notificationService.showMessage(Constant.DANGER, 'Tên đăng nhập không được để trống');\r\n      return;\r\n    }\r\n    const loading = await this.loadingController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: 'Đang tiến hành đăng nhập...',\r\n    });\r\n\r\n    await loading.present();\r\n    /*this.localStorage.get('fcmToken').then(resToken => {\r\n\r\n    });*/\r\n    this.deviceInfo = {\r\n      deviceId: this.deviceInfo.uuid,\r\n      deviceName: this.platform.is('ios') ? 'IOS' : this.deviceInfo.model\r\n    };\r\n    this.mainService.login(this.username, this.password).subscribe((res: any) => {\r\n      if (+res.result === 0) {\r\n        loading.dismiss();\r\n        this.notificationService.showMessage(Constant.DANGER, 'Sai tên đăng nhập hoặc mật khẩu');\r\n        return;\r\n      }\r\n      // console.log('Constant.STORAGE_USERINFO, = ', Constant.STORAGE_USERINFO, res);\r\n      this.storage.set(Constant.STORAGE_USERINFO, res).then((res3) => {\r\n        loading.dismiss();\r\n        // this.router.navigate(['/main']);\r\n        localStorage.setItem(Constant.TOKEN, res3.token);\r\n        // console.log('res3: ', res3);\r\n        this.navCtrl.navigateRoot(['/main/requests']);\r\n      });\r\n\r\n\r\n    }, (error: any) => {\r\n      // console.log('error : ', error);\r\n      if (error.error.message) {\r\n        this.notificationService.showMessage(Constant.DANGER, 'Sai tên đăng nhập hoặc mật khẩu');\r\n      }\r\n      else {\r\n        this.notificationService.showMessage(Constant.DANGER, `Có lỗi khi đăng nhập: ${error.error.message}`);\r\n      }\r\n      loading.dismiss();\r\n    });\r\n  }\r\n}\r\n","<ion-content>\r\n  <img style=\"position: absolute;right: 0\" src=\"/assets/images/login_bg_top.png\">\r\n  <ion-card style=\"margin-top: 150px\" class=\"ion-no-margin ion-no-padding ion-no-box-shadow\">\r\n    <ion-card-header class=\"ion-no-padding\">\r\n      <ion-card-title class=\"ion-cen\">\r\n        <ion-img style=\"max-width: 100%;width: 125px;margin: 5px auto;\" src=\"/assets/images/invivo.png\"></ion-img>\r\n      </ion-card-title>\r\n    </ion-card-header>\r\n    <ion-card-content>\r\n      <ion-item lines=\"none\" class=\"ion-margin-bottom\">\r\n        <ion-icon size=\"small\" color=\"primary\" name=\"person-outline\"></ion-icon>\r\n        <ion-label></ion-label>\r\n        <ion-input [(ngModel)]=\"username\" placeholder=\"Tên đăng nhập\"></ion-input>\r\n      </ion-item>\r\n      <ion-item lines=\"none\" class=\"ion-margin-bottom\">\r\n        <ion-icon size=\"small\"  color=\"primary\" name=\"key-outline\"></ion-icon>\r\n        <ion-label></ion-label>\r\n        <ion-input [(ngModel)]=\"password\" type=\"password\" placeholder=\"Mật khẩu\"></ion-input>\r\n      </ion-item>\r\n      <div class=\"ion-margin-bottom\">\r\n        <ion-label (click)=\"showAlertPassword()\" color=\"primary\">Quên mật khẩu</ion-label>\r\n      </div>\r\n      <div class=\"ion-margin-bottom\">\r\n        <ion-button (click)=\"doLogin()\" style=\"width: 100%\" color=\"primary\">Đăng nhập</ion-button>\r\n      </div>\r\n    </ion-card-content>\r\n  </ion-card>\r\n  <div class=\"footer-bg\">\r\n    <label style=\"font-size: 12px;background: transparent\" color=\"primary\" class=\"ion-text-center\">\r\n      <p style=\"margin: 5px 0;color: #555;font-size: 14px;\">Phiên bản: 1.0.1</p>\r\n      <p style=\"margin: 5px 0;color: #555;font-size: 14px;\">© Copyright Mesoco</p>\r\n    </label>\r\n  </div>\r\n</ion-content>\r\n<!--<ion-footer class=\"ion-no-border\">\r\n    <ion-title style=\"font-size: 12px;background: transparent\" color=\"primary\" class=\"ion-text-center\">Version: 6.2</ion-title>\r\n</ion-footer>-->\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { AuthModel } from '../model/auth.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Constant } from '../shared/constants/constant.class';\r\n//  import { AppConfigService } from '../../app-config.service';\r\nimport { UrlConstant } from '../shared/constants/url.class';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable()\r\nexport class AuthService {\r\n  // private configService: AppConfigService\r\n  constructor(private httpClient: HttpClient ) {\r\n  }\r\n  login(payload): Observable<AuthModel> {\r\n    return this.httpClient.post(environment.baseUrl + '/login', payload);\r\n  }\r\n  logout() {\r\n    const headers = {\r\n      // eslint-disable-next-line @typescript-eslint/naming-convention\r\n      Authorization: `Bearer ${localStorage.getItem(Constant.TOKEN)}`,\r\n    };\r\n    // let token = localStorage.getItem(localStorage.getItem(Constant.TOKEN));\r\n    const token = 'Bearer ' + localStorage.getItem(Constant.TOKEN);\r\n    return this.httpClient.post(environment.baseUrl + UrlConstant.LOGOUT, token, { headers });\r\n  }\r\n  checkToken(): any {\r\n    const headers = {\r\n      // eslint-disable-next-line @typescript-eslint/naming-convention\r\n      Authorization: `Bearer ${localStorage.getItem(Constant.TOKEN)}`,\r\n    };\r\n    // let token = localStorage.getItem(localStorage.getItem(Constant.TOKEN));\r\n    const token = 'Bearer ' + localStorage.getItem(Constant.TOKEN);\r\n    // return this.httpClient.post(environment.baseUrl + UrlConstant.VALIDATE, token, { headers });\r\n    return this.httpClient.post(environment.baseUrl + UrlConstant.VALIDATE, token, { headers });\r\n  }\r\n  checkTokenAdmin(): any {\r\n    const headers = {\r\n      // eslint-disable-next-line @typescript-eslint/naming-convention\r\n      Authorization: `Bearer ${localStorage.getItem(Constant.TOKEN)}`,\r\n    };\r\n    let token = localStorage.getItem(localStorage.getItem(Constant.TOKEN));\r\n    token = 'Bearer ' + localStorage.getItem(Constant.TOKEN);\r\n    return this.httpClient.post(environment.baseUrl + UrlConstant.VALIDATE_ADMIN, token, { headers });\r\n  }\r\n  checkTokenCSC(): any {\r\n    const headers = {\r\n      // eslint-disable-next-line @typescript-eslint/naming-convention\r\n      Authorization: `Bearer ${localStorage.getItem(Constant.TOKEN)}`,\r\n    };\r\n    // let token = localStorage.getItem(localStorage.getItem(Constant.TOKEN));\r\n    const token = 'Bearer ' + localStorage.getItem(Constant.TOKEN);\r\n    return this.httpClient.post(environment.baseUrl + UrlConstant.VALIDATE_CSC, token, { headers });\r\n  }\r\n  registration(payload: any): any {\r\n    return this.httpClient.post(environment.baseUrl + '/User/Signup', payload);\r\n  }\r\n}\r\n"],"names":["Constant","LoginPage","constructor","mainService","http","router","storage","loadingController","toastController","localStorage","notificationService","platform","navCtrl","generalService","authService","ngOnInit","get","then","res","deviceInfo","checkToken","subscribe","objRes","ret","codeRes","code","navigate","removeItem","TOKEN","USER_INFO","showMessage","DANGER","setInitData","getInitialData","resData","setItem","INIT_DATA","JSON","stringify","error","showAlertPassword","WARNING","doLogin","username","loading","create","cssClass","message","present","deviceId","uuid","deviceName","is","model","login","password","result","dismiss","set","STORAGE_USERINFO","res3","token","navigateRoot","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}