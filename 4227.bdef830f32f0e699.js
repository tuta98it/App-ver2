"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4227],{4227:(U,p,s)=>{s.r(p),s.d(p,{LoginPageModule:()=>O});var S=s(6895),h=s(4719),r=s(7331),d=s(6069),v=s(5861),t=s(6443),o=s(6738),A=s(1557),m=s(529),T=s(849),N=s(1188),I=s(2013),E=s(888),u=s(7802),c=s(2340);let f=(()=>{class i{constructor(e){this.httpClient=e}login(e){return this.httpClient.post(c.N.baseUrl+"/login",e)}logout(){const e={Authorization:`Bearer ${localStorage.getItem(t.s.TOKEN)}`},n="Bearer "+localStorage.getItem(t.s.TOKEN);return this.httpClient.post(c.N.baseUrl+u.Y.LOGOUT,n,{headers:e})}checkToken(){const e={Authorization:`Bearer ${localStorage.getItem(t.s.TOKEN)}`},n="Bearer "+localStorage.getItem(t.s.TOKEN);return this.httpClient.post(c.N.baseUrl+u.Y.VALIDATE,n,{headers:e})}checkTokenAdmin(){const e={Authorization:`Bearer ${localStorage.getItem(t.s.TOKEN)}`};let n=localStorage.getItem(localStorage.getItem(t.s.TOKEN));return n="Bearer "+localStorage.getItem(t.s.TOKEN),this.httpClient.post(c.N.baseUrl+u.Y.VALIDATE_ADMIN,n,{headers:e})}checkTokenCSC(){const e={Authorization:`Bearer ${localStorage.getItem(t.s.TOKEN)}`},n="Bearer "+localStorage.getItem(t.s.TOKEN);return this.httpClient.post(c.N.baseUrl+u.Y.VALIDATE_CSC,n,{headers:e})}registration(e){return this.httpClient.post(c.N.baseUrl+"/User/Signup",e)}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(m.eN))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac}),i})();const M=[{path:"",component:(()=>{class i{constructor(e,n,l,a,b,y,L,P,k,R,Z,D){this.mainService=e,this.http=n,this.router=l,this.storage=a,this.loadingController=b,this.toastController=y,this.localStorage=L,this.notificationService=P,this.platform=k,this.navCtrl=R,this.generalService=Z,this.authService=D}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.localStorage.get("deviceInfo").then(n=>{e.deviceInfo=n,console.log(e.deviceInfo)}),e.authService.checkToken().subscribe(n=>{console.log("this.authService.checkToken() res : ",n);const a=n.ret[0].code;n.ret?0===a?e.router.navigate(["/main/requests"]):401===a?(localStorage.removeItem(t.s.TOKEN),localStorage.removeItem(t.s.USER_INFO),e.router.navigate(["/login"]),e.notificationService.showMessage(t.s.DANGER,`${a}: H\u1ec7 th\u1ed1ng kh\xf4ng x\xe1c th\u1ef1c \u0111\u01b0\u1ee3c ng\u01b0\u1eddi d\xf9ng`)):403===a?(localStorage.removeItem(t.s.TOKEN),localStorage.removeItem(t.s.USER_INFO),e.router.navigate(["/login"]),e.notificationService.showMessage(t.s.DANGER,`${a}: Ng\u01b0\u1eddi d\xf9ng kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp`)):e.notificationService.showMessage(t.s.DANGER,`${a}: L\u1ed7i h\u1ec7 th\u1ed1ng, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean`):e.notificationService.showMessage(t.s.DANGER,"L\u1ed7i h\u1ec7 th\u1ed1ng, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean")}),yield e.setInitData()})()}setInitData(){this.generalService.getInitialData().subscribe(e=>{null!==e&&localStorage.setItem(t.s.INIT_DATA,JSON.stringify(e))},e=>{console.log("Error Set INIT_DATA for local-storage")})}showAlertPassword(){this.notificationService.showMessage(t.s.WARNING,"Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean \u0111\u1ec3 c\u1ea5p l\u1ea1i m\u1eadt kh\u1ea9u")}doLogin(){var e=this;return(0,v.Z)(function*(){if(!e.username)return void e.notificationService.showMessage(t.s.DANGER,"T\xean \u0111\u0103ng nh\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng");const n=yield e.loadingController.create({cssClass:"my-custom-class",message:"\u0110ang ti\u1ebfn h\xe0nh \u0111\u0103ng nh\u1eadp..."});yield n.present(),e.deviceInfo={deviceId:e.deviceInfo.uuid,deviceName:e.platform.is("ios")?"IOS":e.deviceInfo.model},e.mainService.login(e.username,e.password).subscribe(l=>{if(0==+l.result)return n.dismiss(),void e.notificationService.showMessage(t.s.DANGER,"Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u");console.log("Constant.STORAGE_USERINFO, = ",t.s.STORAGE_USERINFO,l),e.storage.set(t.s.STORAGE_USERINFO,l).then(a=>{n.dismiss(),localStorage.setItem(t.s.TOKEN,a.token),console.log("res3: ",a),e.navCtrl.navigateRoot(["/main/requests"])})},l=>{console.log("error : ",l),e.notificationService.showMessage(t.s.DANGER,l.error.message?"Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u":`C\xf3 l\u1ed7i khi \u0111\u0103ng nh\u1eadp: ${l.error.message}`),n.dismiss()})})()}}return i.\u0275fac=function(e){return new(e||i)(o.Y36(A.J),o.Y36(m.eN),o.Y36(d.F0),o.Y36(T.K),o.Y36(r.HT),o.Y36(r.yF),o.Y36(N.V),o.Y36(I.g),o.Y36(r.t4),o.Y36(r.SH),o.Y36(E.m),o.Y36(f))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-login"]],decls:27,vars:2,consts:[["src","/assets/images/login_bg_top.png",2,"position","absolute","right","0"],[1,"ion-no-margin","ion-no-padding","ion-no-box-shadow",2,"margin-top","150px"],[1,"ion-no-padding"],[1,"ion-cen"],["src","/assets/images/invivo.png",2,"max-width","100%","width","125px","margin","5px auto"],["lines","none",1,"ion-margin-bottom"],["size","small","color","primary","name","person-outline"],["placeholder","T\xean \u0111\u0103ng nh\u1eadp",3,"ngModel","ngModelChange"],["size","small","color","primary","name","key-outline"],["type","password","placeholder","M\u1eadt kh\u1ea9u",3,"ngModel","ngModelChange"],[1,"ion-margin-bottom"],["color","primary",3,"click"],["color","primary",2,"width","100%",3,"click"],[1,"footer-bg"],["color","primary",1,"ion-text-center",2,"font-size","12px","background","transparent"],[2,"margin","5px 0","color","#555","font-size","14px"]],template:function(e,n){1&e&&(o.TgZ(0,"ion-content"),o._UZ(1,"img",0),o.TgZ(2,"ion-card",1)(3,"ion-card-header",2)(4,"ion-card-title",3),o._UZ(5,"ion-img",4),o.qZA()(),o.TgZ(6,"ion-card-content")(7,"ion-item",5),o._UZ(8,"ion-icon",6)(9,"ion-label"),o.TgZ(10,"ion-input",7),o.NdJ("ngModelChange",function(a){return n.username=a}),o.qZA()(),o.TgZ(11,"ion-item",5),o._UZ(12,"ion-icon",8)(13,"ion-label"),o.TgZ(14,"ion-input",9),o.NdJ("ngModelChange",function(a){return n.password=a}),o.qZA()(),o.TgZ(15,"div",10)(16,"ion-label",11),o.NdJ("click",function(){return n.showAlertPassword()}),o._uU(17,"Qu\xean m\u1eadt kh\u1ea9u"),o.qZA()(),o.TgZ(18,"div",10)(19,"ion-button",12),o.NdJ("click",function(){return n.doLogin()}),o._uU(20,"\u0110\u0103ng nh\u1eadp"),o.qZA()()()(),o.TgZ(21,"div",13)(22,"label",14)(23,"p",15),o._uU(24,"Phi\xean b\u1ea3n: 1.0.1"),o.qZA(),o.TgZ(25,"p",15),o._uU(26,"\xa9 Copyright Mesoco"),o.qZA()()()()),2&e&&(o.xp6(10),o.Q6J("ngModel",n.username),o.xp6(4),o.Q6J("ngModel",n.password))},dependencies:[h.JJ,h.On,r.YG,r.PM,r.FN,r.Zi,r.Dq,r.W2,r.gu,r.Xz,r.pK,r.Ie,r.Q$,r.j9],styles:["ion-item[_ngcontent-%COMP%]{border:solid 1px var(--ion-color-border-light);border-radius:4px}.item-inner[_ngcontent-%COMP%]{border:none!important}.my-custom-class[_ngcontent-%COMP%]{background:red}.footer-bg[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:127px;background:url(/assets/images/login_bg_bot.png);background-repeat:no-repeat;z-index:-1}"]}),i})()}];let C=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[d.Bz.forChild(M),d.Bz]}),i})(),O=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({providers:[f],imports:[S.ez,h.u5,r.Pc,C,m.JF]}),i})()}}]);