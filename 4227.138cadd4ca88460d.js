"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4227],{4227:(U,p,r)=>{r.r(p),r.d(p,{LoginPageModule:()=>b});var S=r(6895),h=r(4719),s=r(7331),m=r(6069),v=r(5861),i=r(6443),t=r(6738),A=r(1557),d=r(529),N=r(849),T=r(1188),I=r(2013),E=r(888),u=r(7802),c=r(2340);let f=(()=>{class o{constructor(e){this.httpClient=e}login(e){return this.httpClient.post(c.N.baseUrl+"/login",e)}logout(){const e={Authorization:`Bearer ${localStorage.getItem(i.s.TOKEN)}`},n="Bearer "+localStorage.getItem(i.s.TOKEN);return this.httpClient.post(c.N.baseUrl+u.Y.LOGOUT,n,{headers:e})}checkToken(){const e={Authorization:`Bearer ${localStorage.getItem(i.s.TOKEN)}`},n="Bearer "+localStorage.getItem(i.s.TOKEN);return this.httpClient.post(c.N.baseUrl+u.Y.VALIDATE,n,{headers:e})}checkTokenAdmin(){const e={Authorization:`Bearer ${localStorage.getItem(i.s.TOKEN)}`};let n=localStorage.getItem(localStorage.getItem(i.s.TOKEN));return n="Bearer "+localStorage.getItem(i.s.TOKEN),this.httpClient.post(c.N.baseUrl+u.Y.VALIDATE_ADMIN,n,{headers:e})}checkTokenCSC(){const e={Authorization:`Bearer ${localStorage.getItem(i.s.TOKEN)}`},n="Bearer "+localStorage.getItem(i.s.TOKEN);return this.httpClient.post(c.N.baseUrl+u.Y.VALIDATE_CSC,n,{headers:e})}registration(e){return this.httpClient.post(c.N.baseUrl+"/User/Signup",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();const M=[{path:"",component:(()=>{class o{constructor(e,n,g,a,y,O,L,P,Z,k,D,R){this.mainService=e,this.http=n,this.router=g,this.storage=a,this.loadingController=y,this.toastController=O,this.localStorage=L,this.notificationService=P,this.platform=Z,this.navCtrl=k,this.generalService=D,this.authService=R}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.localStorage.get("deviceInfo").then(n=>{e.deviceInfo=n}),e.authService.checkToken().subscribe(n=>{const a=n.ret[0].code;n.ret?0===a?e.router.navigate(["/main/requests"]):401===a?(localStorage.removeItem(i.s.TOKEN),localStorage.removeItem(i.s.USER_INFO),e.router.navigate(["/login"]),e.notificationService.showMessage(i.s.DANGER,`${a}: H\u1ec7 th\u1ed1ng kh\xf4ng x\xe1c th\u1ef1c \u0111\u01b0\u1ee3c ng\u01b0\u1eddi d\xf9ng`)):403===a?(localStorage.removeItem(i.s.TOKEN),localStorage.removeItem(i.s.USER_INFO),e.router.navigate(["/login"]),e.notificationService.showMessage(i.s.DANGER,`${a}: Ng\u01b0\u1eddi d\xf9ng kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp`)):e.notificationService.showMessage(i.s.DANGER,`${a}: L\u1ed7i h\u1ec7 th\u1ed1ng, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean`):e.notificationService.showMessage(i.s.DANGER,"L\u1ed7i h\u1ec7 th\u1ed1ng, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean")}),yield e.setInitData()})()}setInitData(){this.generalService.getInitialData().subscribe(e=>{null!==e&&localStorage.setItem(i.s.INIT_DATA,JSON.stringify(e))},e=>{})}showAlertPassword(){this.notificationService.showMessage(i.s.WARNING,"Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean \u0111\u1ec3 c\u1ea5p l\u1ea1i m\u1eadt kh\u1ea9u")}doLogin(){var e=this;return(0,v.Z)(function*(){if(!e.username)return void e.notificationService.showMessage(i.s.DANGER,"T\xean \u0111\u0103ng nh\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng");const n=yield e.loadingController.create({cssClass:"my-custom-class",message:"\u0110ang ti\u1ebfn h\xe0nh \u0111\u0103ng nh\u1eadp..."});yield n.present(),e.deviceInfo={deviceId:e.deviceInfo.uuid,deviceName:e.platform.is("ios")?"IOS":e.deviceInfo.model},e.mainService.login(e.username,e.password).subscribe(g=>{if(0==+g.result)return n.dismiss(),void e.notificationService.showMessage(i.s.DANGER,"Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u");e.storage.set(i.s.STORAGE_USERINFO,g).then(a=>{n.dismiss(),localStorage.setItem(i.s.TOKEN,a.token),e.navCtrl.navigateRoot(["/main/requests"])})},g=>{e.notificationService.showMessage(i.s.DANGER,g.error.message?"Sai t\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u":`C\xf3 l\u1ed7i khi \u0111\u0103ng nh\u1eadp: ${g.error.message}`),n.dismiss()})})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.J),t.Y36(d.eN),t.Y36(m.F0),t.Y36(N.K),t.Y36(s.HT),t.Y36(s.yF),t.Y36(T.V),t.Y36(I.g),t.Y36(s.t4),t.Y36(s.SH),t.Y36(E.m),t.Y36(f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:27,vars:2,consts:[["src","/assets/images/login_bg_top.png",2,"position","absolute","right","0"],[1,"ion-no-margin","ion-no-padding","ion-no-box-shadow",2,"margin-top","150px"],[1,"ion-no-padding"],[1,"ion-cen"],["src","/assets/images/invivo.png",2,"max-width","100%","width","125px","margin","5px auto"],["lines","none",1,"ion-margin-bottom"],["size","small","color","primary","name","person-outline"],["placeholder","T\xean \u0111\u0103ng nh\u1eadp",3,"ngModel","ngModelChange"],["size","small","color","primary","name","key-outline"],["type","password","placeholder","M\u1eadt kh\u1ea9u",3,"ngModel","ngModelChange"],[1,"ion-margin-bottom"],["color","primary",3,"click"],["color","primary",2,"width","100%",3,"click"],[1,"footer-bg"],["color","primary",1,"ion-text-center",2,"font-size","12px","background","transparent"],[2,"margin","5px 0","color","#555","font-size","14px"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-content"),t._UZ(1,"img",0),t.TgZ(2,"ion-card",1)(3,"ion-card-header",2)(4,"ion-card-title",3),t._UZ(5,"ion-img",4),t.qZA()(),t.TgZ(6,"ion-card-content")(7,"ion-item",5),t._UZ(8,"ion-icon",6)(9,"ion-label"),t.TgZ(10,"ion-input",7),t.NdJ("ngModelChange",function(a){return n.username=a}),t.qZA()(),t.TgZ(11,"ion-item",5),t._UZ(12,"ion-icon",8)(13,"ion-label"),t.TgZ(14,"ion-input",9),t.NdJ("ngModelChange",function(a){return n.password=a}),t.qZA()(),t.TgZ(15,"div",10)(16,"ion-label",11),t.NdJ("click",function(){return n.showAlertPassword()}),t._uU(17,"Qu\xean m\u1eadt kh\u1ea9u"),t.qZA()(),t.TgZ(18,"div",10)(19,"ion-button",12),t.NdJ("click",function(){return n.doLogin()}),t._uU(20,"\u0110\u0103ng nh\u1eadp"),t.qZA()()()(),t.TgZ(21,"div",13)(22,"label",14)(23,"p",15),t._uU(24,"Phi\xean b\u1ea3n: 1.0.1"),t.qZA(),t.TgZ(25,"p",15),t._uU(26,"\xa9 Copyright Mesoco"),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("ngModel",n.username),t.xp6(4),t.Q6J("ngModel",n.password))},dependencies:[h.JJ,h.On,s.YG,s.PM,s.FN,s.Zi,s.Dq,s.W2,s.gu,s.Xz,s.pK,s.Ie,s.Q$,s.j9],styles:["ion-item[_ngcontent-%COMP%]{border:solid 1px var(--ion-color-border-light);border-radius:4px}.item-inner[_ngcontent-%COMP%]{border:none!important}.my-custom-class[_ngcontent-%COMP%]{background:red}.footer-bg[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:127px;background:url(/assets/images/login_bg_bot.png);background-repeat:no-repeat;z-index:-1}"]}),o})()}];let C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(M),m.Bz]}),o})(),b=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[f],imports:[S.ez,h.u5,s.Pc,C,d.JF]}),o})()}}]);